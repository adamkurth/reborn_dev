

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Overview &mdash; bornagain 0.0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="bornagain 0.0.1 documentation" href="index.html"/>
        <link rel="next" title="Installation" href="installation.html"/>
        <link rel="prev" title="bornagain’s documentation" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> bornagain</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#some-basics">Some basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pixel-array-detectors">Pixel-Array Detectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simulation">Simulation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#system-wide-installation">System-wide installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#pure-anaconda-python">Pure Anaconda Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#using-anaconda-and-pip">Using Anaconda and pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installation-on-scientific-linux-6">Installation on Scientific Linux 6</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="coding.html">Coding guidlines for developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="coding.html#overview-of-bornagain">Overview of bornagain</a></li>
<li class="toctree-l2"><a class="reference internal" href="coding.html#checking-for-pep8-compliance">Checking for PEP8 compliance</a></li>
<li class="toctree-l2"><a class="reference internal" href="coding.html#generation-of-documentation">Generation of documentation</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">bornagain</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Overview</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/overview.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>Here you will find an overview of basic concepts, which hopefully help you understand how the modules in bornagain are meant to fit together.</p>
<div class="section" id="some-basics">
<h2>Some basics<a class="headerlink" href="#some-basics" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>All units in bornagain are SI.  Angles are radians.  There are no known exceptions so far.</li>
<li>All vectors should have a numpy shape of Nx3, in order to keep vector components close in memory.  We are quite strict about this.</li>
<li>Detector panels are often segmented in real experiments.  The classes in the detector module are intended to help ease the burden of working with such detectors.</li>
<li>Learn how to use iPython to explore the functionality of bornagain classes.</li>
<li>If documentation is missing, tell someone (e.g. rkirian at asu dot edu).</li>
</ul>
</div>
<div class="section" id="pixel-array-detectors">
<h2>Pixel-Array Detectors<a class="headerlink" href="#pixel-array-detectors" title="Permalink to this headline">¶</a></h2>
<p>The most common detector we use is the &#8220;pixel-array detector&#8221;, abbeviated as &#8220;PAD&#8221; in the bornagain package.  This detector is like a CCD and is assumed to consist of an orthogonal 2D grid of pixels.  This grid is described by the following vectors:</p>
<blockquote>
<div><p><span class="math">\(\vec{T}\)</span> is the vector pointing from the origin to the center of the corner detector pixel that is assumed to be the first in memory.</p>
<p><span class="math">\(\vec{F}\)</span> is the vector that points along the &#8220;fast-scan&#8221; direction.  This is the distance and direction that points to the next pixel that is adjacent in physical space, as well as in computer memory.  The length of this vector indicates the pixel size.</p>
<p><span class="math">\(N_F\)</span> is the number of fast-scan pixels in the detector.</p>
<p><span class="math">\(\vec{S}\)</span> is the vector that points along the &#8220;slow-scan&#8221; direction.  This is much like the <span class="math">\(\vec{F}\)</span> vector, but these pixels are only adjacent in physical space but not in computer memory.  In computer memory, adjacent pixels have a memory stride of length <span class="math">\(N_F\)</span>.</p>
<p><span class="math">\(N_S\)</span> is the number of slow-scan pixels in the detector.</p>
</div></blockquote>
<p>Note that there are no angles involved in describing the detector geometry.  That is because angles are confusing due to the many different conventions used by different reference books and software.  Also, importantly, rotation operations do not commute, which only adds to the confusion.</p>
<p>The incident x-ray beam direction is not assumed in bornagain.  We must specify this vector:</p>
<blockquote>
<div><span class="math">\(\hat{B}\)</span> is the unit vector pointing along the incident beam direction.  This of course only makes sense if the illumination is a plane wave, but we take this to be the &#8220;nominal&#8221; beam direction.  In some places bornagain might default to the (0,0,1) direction, but you need not adhere to this.  Most likely it is only important for display purposes.</div></blockquote>
<p>In the case of free-electron lasers, beam polarization is important:</p>
<blockquote>
<div><span class="math">\(\hat{U}\)</span> is the polarization vector for the x-ray beam.  This single vector is appropriate for linearly polarized beams.  For beams that are not purely linearly polarized, one can sum the contributions from the two polarizations.  The polarization vector of the first component, along with the beam direction, specifies the second polarization vector.</div></blockquote>
<p>With the above vectors specified, we may now generate the quantities that will be useful when doing diffraction analysis and simulations.  The vector pointing from the origin (where the target is located) to a detector pixel indexed by <span class="math">\(i\)</span> and <span class="math">\(j\)</span>, is</p>
<blockquote>
<div><span class="math">\(\vec{V}_{ij}=\vec{T}+i\vec{F}+j\vec{S}\)</span></div></blockquote>
<p>Easy, right?  Now let&#8217;s compute the scattering vector for pixel <span class="math">\(i,j\)</span>:</p>
<blockquote>
<div><span class="math">\(\vec{Q}_{ij}=\frac{2\pi}{\lambda}\left(\hat{V}_{ij} - \hat{B}\right)\)</span></div></blockquote>
<p>where <span class="math">\(\lambda\)</span> is the photon wavelength.  Next we can compute the scattering angle of a pixel:</p>
<blockquote>
<div><span class="math">\(\theta_{ij} = \arccos(\hat{V}_{ij}\cdot\hat{B})\)</span></div></blockquote>
<p>For linearly polarized light, the polarization correction is</p>
<blockquote>
<div><span class="math">\(P_{ij} = 1 - |\hat{U}\cdot\hat{V}_{ij}|^2\)</span></div></blockquote>
<p>If the light is not linearly polarized, then the polarization factor is a weighted sum of the above component and this one:</p>
<blockquote>
<div><span class="math">\(P'_{ij} = 1 - |(\hat{B}\times\hat{U})\cdot\hat{V}_{ij}|^2\)</span></div></blockquote>
<p>The solid angle of a pixel is approximately equal to</p>
<blockquote>
<div><span class="math">\(\Delta \Omega_{ij} \approx \frac{\text{Area}}{R^2}\cos(\theta) = \frac{|\vec{F}\times\vec{S}|}{|V|^2}\hat{n}\cdot \hat{V}_{ij}\)</span></div></blockquote>
<p>where the vector normal to the PAD is</p>
<blockquote>
<div><span class="math">\(\hat{n} = \frac{\vec{F}\times\vec{S}}{|\vec{F}\times\vec{S}|}\)</span></div></blockquote>
<p>In the bornagain detector and source modules, you will find a reasonably good correspondence between the quantities above and the members of the classes within the <code class="xref any docutils literal"><span class="pre">detector</span></code> and <code class="xref any docutils literal"><span class="pre">source</span></code> modules.</p>
</div>
<div class="section" id="simulation">
<h2>Simulation<a class="headerlink" href="#simulation" title="Permalink to this headline">¶</a></h2>
<p>Some description of how we work with opencl.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="bornagain’s documentation"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Richard A Kirian.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem &mdash; bornagain 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../../../search.html"/>
    <link rel="top" title="bornagain 0.0.1 documentation" href="../../../../../../index.html"/>
        <link rel="up" title="bornagain.external.pyqtgraph.pyqtgraph" href="../../pyqtgraph.html"/> 

  
  <script src="../../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../../index.html" class="icon icon-home"> bornagain
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../bornagain.html">bornagain package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../modules.html">bornagain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../coding.html">Coding guidlines for developers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">bornagain</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../pyqtgraph.html">bornagain.external.pyqtgraph.pyqtgraph</a> &raquo;</li>
        
      <li>bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">..Qt</span> <span class="k">import</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtCore</span>
<span class="kn">from</span> <span class="nn">..python2_3</span> <span class="k">import</span> <span class="n">asUnicode</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">..Point</span> <span class="k">import</span> <span class="n">Point</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="k">import</span> <span class="n">debug</span> <span class="k">as</span> <span class="n">debug</span>
<span class="kn">import</span> <span class="nn">weakref</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="k">import</span> <span class="n">functions</span> <span class="k">as</span> <span class="n">fn</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="k">import</span> <span class="n">getConfigOption</span>
<span class="kn">from</span> <span class="nn">.GraphicsWidget</span> <span class="k">import</span> <span class="n">GraphicsWidget</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AxisItem&#39;</span><span class="p">]</span>
<div class="viewcode-block" id="AxisItem"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem">[docs]</a><span class="k">class</span> <span class="nc">AxisItem</span><span class="p">(</span><span class="n">GraphicsWidget</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GraphicsItem showing a single plot axis with ticks, values, and label.</span>
<span class="sd">    Can be configured to fit on any side of a plot, and can automatically synchronize its displayed scale with ViewBox items.</span>
<span class="sd">    Ticks can be extended to draw a grid.</span>
<span class="sd">    If maxTickLength is negative, ticks point into the plot. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">pen</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">linkView</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">maxTickLength</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">showValues</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ==============  ===============================================================</span>
<span class="sd">        **Arguments:**</span>
<span class="sd">        orientation     one of &#39;left&#39;, &#39;right&#39;, &#39;top&#39;, or &#39;bottom&#39;</span>
<span class="sd">        maxTickLength   (px) maximum length of ticks to draw. Negative values draw</span>
<span class="sd">                        into the plot, positive values draw outward.</span>
<span class="sd">        linkView        (ViewBox) causes the range of values displayed in the axis</span>
<span class="sd">                        to be linked to the visible range of a ViewBox.</span>
<span class="sd">        showValues      (bool) Whether to display values adjacent to ticks </span>
<span class="sd">        pen             (QPen) Pen used when drawing ticks.</span>
<span class="sd">        ==============  ===============================================================</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">GraphicsWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QGraphicsTextItem</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">=</span> <span class="n">orientation</span>
        <span class="k">if</span> <span class="n">orientation</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Orientation argument must be one of &#39;left&#39;, &#39;right&#39;, &#39;top&#39;, or &#39;bottom&#39;.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">orientation</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">-</span><span class="mi">90</span><span class="p">)</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;tickTextOffset&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>  <span class="c1">## (horizontal, vertical) spacing between text and axis </span>
            <span class="s1">&#39;tickTextWidth&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>  <span class="c1">## space reserved for tick text</span>
            <span class="s1">&#39;tickTextHeight&#39;</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span> 
            <span class="s1">&#39;autoExpandTextSpace&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1">## automatically expand text space if needed</span>
            <span class="s1">&#39;tickFont&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;stopAxisAtTick&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>  <span class="c1">## whether axis is drawn to edge of box or to last tick </span>
            <span class="s1">&#39;textFillLimits&#39;</span><span class="p">:</span> <span class="p">[</span>  <span class="c1">## how much of the axis to fill up with tick text, maximally. </span>
                <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span>    <span class="c1">## never fill more than 80% of the axis</span>
                <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">),</span>    <span class="c1">## If we already have 2 ticks with text, fill no more than 60% of the axis</span>
                <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">),</span>    <span class="c1">## If we already have 4 ticks with text, fill no more than 40% of the axis</span>
                <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">),</span>    <span class="c1">## If we already have 6 ticks with text, fill no more than 20% of the axis</span>
                <span class="p">],</span>
            <span class="s1">&#39;showValues&#39;</span><span class="p">:</span> <span class="n">showValues</span><span class="p">,</span>
            <span class="s1">&#39;tickLength&#39;</span><span class="p">:</span> <span class="n">maxTickLength</span><span class="p">,</span>
            <span class="s1">&#39;maxTickLevel&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;maxTextLevel&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">}</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">textWidth</span> <span class="o">=</span> <span class="mi">30</span>  <span class="c1">## Keeps track of maximum width / height of tick text </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">=</span> <span class="mi">18</span>
        
        <span class="c1"># If the user specifies a width / height, remember that setting</span>
        <span class="c1"># indefinitely.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fixedWidth</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fixedHeight</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">labelText</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelUnits</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelUnitPrefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelStyle</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logMode</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tickFont</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_tickLevels</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1">## used to override the automatic ticking system with explicit ticks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tickSpacing</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># used to override default tickSpacing method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSIPrefix</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSIPrefixScale</span> <span class="o">=</span> <span class="mf">1.0</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">pen</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPen</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">pen</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_linkedView</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">linkView</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linkToView</span><span class="p">(</span><span class="n">linkView</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">showLabel</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1">#self.setCacheMode(self.DeviceCoordinateCache)</span>

<div class="viewcode-block" id="AxisItem.setStyle"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setStyle">[docs]</a>    <span class="k">def</span> <span class="nf">setStyle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set various style options.</span>
<span class="sd">        </span>
<span class="sd">        =================== =======================================================</span>
<span class="sd">        Keyword Arguments:</span>
<span class="sd">        tickLength          (int) The maximum length of ticks in pixels. </span>
<span class="sd">                            Positive values point toward the text; negative </span>
<span class="sd">                            values point away.</span>
<span class="sd">        tickTextOffset      (int) reserved spacing between text and axis in px</span>
<span class="sd">        tickTextWidth       (int) Horizontal space reserved for tick text in px</span>
<span class="sd">        tickTextHeight      (int) Vertical space reserved for tick text in px</span>
<span class="sd">        autoExpandTextSpace (bool) Automatically expand text space if the tick</span>
<span class="sd">                            strings become too long.</span>
<span class="sd">        tickFont            (QFont or None) Determines the font used for tick </span>
<span class="sd">                            values. Use None for the default font.</span>
<span class="sd">        stopAxisAtTick      (tuple: (bool min, bool max)) If True, the axis </span>
<span class="sd">                            line is drawn only as far as the last tick. </span>
<span class="sd">                            Otherwise, the line is drawn to the edge of the </span>
<span class="sd">                            AxisItem boundary.</span>
<span class="sd">        textFillLimits      (list of (tick #, % fill) tuples). This structure</span>
<span class="sd">                            determines how the AxisItem decides how many ticks </span>
<span class="sd">                            should have text appear next to them. Each tuple in</span>
<span class="sd">                            the list specifies what fraction of the axis length</span>
<span class="sd">                            may be occupied by text, given the number of ticks</span>
<span class="sd">                            that already have text displayed. For example::</span>
<span class="sd">                            </span>
<span class="sd">                                [(0, 0.8), # Never fill more than 80% of the axis</span>
<span class="sd">                                 (2, 0.6), # If we already have 2 ticks with text, </span>
<span class="sd">                                           # fill no more than 60% of the axis</span>
<span class="sd">                                 (4, 0.4), # If we already have 4 ticks with text, </span>
<span class="sd">                                           # fill no more than 40% of the axis</span>
<span class="sd">                                 (6, 0.2)] # If we already have 6 ticks with text, </span>
<span class="sd">                                           # fill no more than 20% of the axis</span>
<span class="sd">                                </span>
<span class="sd">        showValues          (bool) indicates whether text is displayed adjacent</span>
<span class="sd">                            to ticks.</span>
<span class="sd">        =================== =======================================================</span>
<span class="sd">        </span>
<span class="sd">        Added in version 0.9.9</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">kwd</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">kwds</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">kwd</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NameError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> is not a valid style argument.&quot;</span> <span class="o">%</span> <span class="n">kwd</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">kwd</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;tickLength&#39;</span><span class="p">,</span> <span class="s1">&#39;tickTextOffset&#39;</span><span class="p">,</span> <span class="s1">&#39;tickTextWidth&#39;</span><span class="p">,</span> <span class="s1">&#39;tickTextHeight&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Argument &#39;</span><span class="si">%s</span><span class="s2">&#39; must be int&quot;</span> <span class="o">%</span> <span class="n">kwd</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">kwd</span> <span class="o">==</span> <span class="s1">&#39;tickTextOffset&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickTextOffset&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickTextOffset&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="n">kwd</span> <span class="o">==</span> <span class="s1">&#39;stopAxisAtTick&#39;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">bool</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Argument &#39;stopAxisAtTick&#39; must have type (bool, bool)&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="n">kwd</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="n">kwd</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_adjustSize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.close"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">()</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">()</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="AxisItem.setGrid"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setGrid">[docs]</a>    <span class="k">def</span> <span class="nf">setGrid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the alpha value (0-255) for the grid, or False to disable.</span>
<span class="sd">        </span>
<span class="sd">        When grid lines are enabled, the axis tick lines are extended to cover</span>
<span class="sd">        the extent of the linked ViewBox, if any.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">grid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepareGeometryChange</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.setLogMode"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setLogMode">[docs]</a>    <span class="k">def</span> <span class="nf">setLogMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">log</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If *log* is True, then ticks are displayed on a logarithmic scale and values</span>
<span class="sd">        are adjusted accordingly. (This is usually accessed by changing the log mode </span>
<span class="sd">        of a :func:`PlotItem &lt;pyqtgraph.PlotItem.setLogMode&gt;`)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logMode</span> <span class="o">=</span> <span class="n">log</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.setTickFont"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setTickFont">[docs]</a>    <span class="k">def</span> <span class="nf">setTickFont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tickFont</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepareGeometryChange</span><span class="p">()</span>
        <span class="c1">## Need to re-allocate space depending on font size?</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.resizeEvent"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.resizeEvent">[docs]</a>    <span class="k">def</span> <span class="nf">resizeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1">#s = self.size()</span>
        
        <span class="c1">## Set the position of the label</span>
        <span class="n">nudge</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">br</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">()</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QPointF</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setY</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">br</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setX</span><span class="p">(</span><span class="o">-</span><span class="n">nudge</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setY</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="n">br</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setX</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="n">br</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">+</span><span class="n">nudge</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setY</span><span class="p">(</span><span class="o">-</span><span class="n">nudge</span><span class="p">)</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setX</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">/</span><span class="mf">2.</span> <span class="o">-</span> <span class="n">br</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">/</span><span class="mf">2.</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;bottom&#39;</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setX</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">/</span><span class="mf">2.</span> <span class="o">-</span> <span class="n">br</span><span class="o">.</span><span class="n">width</span><span class="p">()</span><span class="o">/</span><span class="mf">2.</span><span class="p">))</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setY</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">-</span><span class="n">br</span><span class="o">.</span><span class="n">height</span><span class="p">()</span><span class="o">+</span><span class="n">nudge</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span></div>
        
<div class="viewcode-block" id="AxisItem.showLabel"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.showLabel">[docs]</a>    <span class="k">def</span> <span class="nf">showLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Show/hide the label text for this axis.&quot;&quot;&quot;</span>
        <span class="c1">#self.drawLabel = show</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">show</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_updateWidth</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_updateHeight</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSIPrefix</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateAutoSIPrefix</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.setLabel"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setLabel">[docs]</a>    <span class="k">def</span> <span class="nf">setLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unitPrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the text displayed adjacent to the axis.</span>
<span class="sd">        </span>
<span class="sd">        ==============  =============================================================</span>
<span class="sd">        **Arguments:**</span>
<span class="sd">        text            The text (excluding units) to display on the label for this</span>
<span class="sd">                        axis.</span>
<span class="sd">        units           The units for this axis. Units should generally be given</span>
<span class="sd">                        without any scaling prefix (eg, &#39;V&#39; instead of &#39;mV&#39;). The</span>
<span class="sd">                        scaling prefix will be automatically prepended based on the</span>
<span class="sd">                        range of data displayed.</span>
<span class="sd">        **args          All extra keyword arguments become CSS style options for</span>
<span class="sd">                        the &lt;span&gt; tag which will surround the axis label and units.</span>
<span class="sd">        ==============  =============================================================</span>
<span class="sd">        </span>
<span class="sd">        The final text generated for the label will look like::</span>
<span class="sd">        </span>
<span class="sd">            &lt;span style=&quot;...options...&quot;&gt;{text} (prefix{units})&lt;/span&gt;</span>
<span class="sd">            </span>
<span class="sd">        Each extra keyword argument will become a CSS option in the above template. </span>
<span class="sd">        For example, you can set the font size and color of the label::</span>
<span class="sd">        </span>
<span class="sd">            labelStyle = {&#39;color&#39;: &#39;#FFF&#39;, &#39;font-size&#39;: &#39;14pt&#39;}</span>
<span class="sd">            axis.setLabel(&#39;label text&#39;, units=&#39;V&#39;, **labelStyle)</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">labelText</span> <span class="o">=</span> <span class="n">text</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showLabel</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">units</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">labelUnits</span> <span class="o">=</span> <span class="n">units</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showLabel</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">unitPrefix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">labelUnitPrefix</span> <span class="o">=</span> <span class="n">unitPrefix</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">labelStyle</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">setHtml</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labelString</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_adjustSize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
            
<div class="viewcode-block" id="AxisItem.labelString"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.labelString">[docs]</a>    <span class="k">def</span> <span class="nf">labelString</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">labelUnits</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSIPrefix</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSIPrefixScale</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">units</span> <span class="o">=</span> <span class="n">asUnicode</span><span class="p">(</span><span class="s1">&#39;(x</span><span class="si">%g</span><span class="s1">)&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">autoSIPrefixScale</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#print repr(self.labelUnitPrefix), repr(self.labelUnits)</span>
            <span class="n">units</span> <span class="o">=</span> <span class="n">asUnicode</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">%s%s</span><span class="s1">)&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">asUnicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labelUnitPrefix</span><span class="p">),</span> <span class="n">asUnicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labelUnits</span><span class="p">))</span>
            
        <span class="n">s</span> <span class="o">=</span> <span class="n">asUnicode</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">asUnicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labelText</span><span class="p">),</span> <span class="n">asUnicode</span><span class="p">(</span><span class="n">units</span><span class="p">))</span>
        
        <span class="n">style</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">labelStyle</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">labelStyle</span><span class="p">])</span>
        
        <span class="k">return</span> <span class="n">asUnicode</span><span class="p">(</span><span class="s2">&quot;&lt;span style=&#39;</span><span class="si">%s</span><span class="s2">&#39;&gt;</span><span class="si">%s</span><span class="s2">&lt;/span&gt;&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">style</span><span class="p">,</span> <span class="n">asUnicode</span><span class="p">(</span><span class="n">s</span><span class="p">))</span></div>
    
    <span class="k">def</span> <span class="nf">_updateMaxTextSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="c1">## Informs that the maximum tick size orthogonal to the axis has</span>
        <span class="c1">## changed; we use this to decide whether the item needs to be resized</span>
        <span class="c1">## to accomodate.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
            <span class="n">mx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textWidth</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mx</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">textWidth</span> <span class="ow">or</span> <span class="n">mx</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">textWidth</span><span class="o">-</span><span class="mi">10</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">textWidth</span> <span class="o">=</span> <span class="n">mx</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;autoExpandTextSpace&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_updateWidth</span><span class="p">()</span>
                    <span class="c1">#return True  ## size has changed</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">mx</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="ow">or</span> <span class="n">mx</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span><span class="o">-</span><span class="mi">10</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">=</span> <span class="n">mx</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;autoExpandTextSpace&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_updateHeight</span><span class="p">()</span>
                    <span class="c1">#return True  ## size has changed</span>
        
    <span class="k">def</span> <span class="nf">_adjustSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_updateWidth</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_updateHeight</span><span class="p">()</span>
    
<div class="viewcode-block" id="AxisItem.setHeight"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setHeight">[docs]</a>    <span class="k">def</span> <span class="nf">setHeight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the height of this axis reserved for ticks and tick labels.</span>
<span class="sd">        The height of the axis label is automatically added.</span>
<span class="sd">        </span>
<span class="sd">        If *height* is None, then the value will be determined automatically</span>
<span class="sd">        based on the size of the tick text.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fixedHeight</span> <span class="o">=</span> <span class="n">h</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_updateHeight</span><span class="p">()</span></div>
        
    <span class="k">def</span> <span class="nf">_updateHeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
            <span class="n">h</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixedHeight</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;showValues&#39;</span><span class="p">]:</span>
                    <span class="n">h</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;autoExpandTextSpace&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickTextHeight&#39;</span><span class="p">]</span>
                <span class="n">h</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickTextOffset&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;showValues&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="mi">0</span>
                <span class="n">h</span> <span class="o">+=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickLength&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
                    <span class="n">h</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.8</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixedHeight</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">setMaximumHeight</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumHeight</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        
<div class="viewcode-block" id="AxisItem.setWidth"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setWidth">[docs]</a>    <span class="k">def</span> <span class="nf">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the width of this axis reserved for ticks and tick labels.</span>
<span class="sd">        The width of the axis label is automatically added.</span>
<span class="sd">        </span>
<span class="sd">        If *width* is None, then the value will be determined automatically</span>
<span class="sd">        based on the size of the tick text.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fixedWidth</span> <span class="o">=</span> <span class="n">w</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_updateWidth</span><span class="p">()</span></div>
        
    <span class="k">def</span> <span class="nf">_updateWidth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
            <span class="n">w</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixedWidth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;showValues&#39;</span><span class="p">]:</span>
                    <span class="n">w</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;autoExpandTextSpace&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">textWidth</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickTextWidth&#39;</span><span class="p">]</span>
                <span class="n">w</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickTextOffset&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;showValues&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="mi">0</span>
                <span class="n">w</span> <span class="o">+=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickLength&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
                    <span class="n">w</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.8</span>  <span class="c1">## bounding rect is usually an overestimate</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixedWidth</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">setMaximumWidth</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        
<div class="viewcode-block" id="AxisItem.pen"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.pen">[docs]</a>    <span class="k">def</span> <span class="nf">pen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">fn</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="n">getConfigOption</span><span class="p">(</span><span class="s1">&#39;foreground&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">fn</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="AxisItem.setPen"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setPen">[docs]</a>    <span class="k">def</span> <span class="nf">setPen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the pen used for drawing text, axes, ticks, and grid lines.</span>
<span class="sd">        If no arguments are given, the default foreground color will be used </span>
<span class="sd">        (see :func:`setConfigOption &lt;pyqtgraph.setConfigOption&gt;`).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pen</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">mkPen</span><span class="p">(</span><span class="n">getConfigOption</span><span class="p">(</span><span class="s1">&#39;foreground&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelStyle</span><span class="p">[</span><span class="s1">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="n">fn</span><span class="o">.</span><span class="n">colorStr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pen</span><span class="o">.</span><span class="n">color</span><span class="p">())[:</span><span class="mi">6</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.setScale"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setScale">[docs]</a>    <span class="k">def</span> <span class="nf">setScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the value scaling for this axis. </span>
<span class="sd">        </span>
<span class="sd">        Setting this value causes the axis to draw ticks and tick labels as if</span>
<span class="sd">        the view coordinate system were scaled. By default, the axis scaling is </span>
<span class="sd">        1.0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Deprecated usage, kept for backward compatibility</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  
            <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enableAutoSIPrefix</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">scale</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setLabel</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.enableAutoSIPrefix"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.enableAutoSIPrefix">[docs]</a>    <span class="k">def</span> <span class="nf">enableAutoSIPrefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable (or disable) automatic SI prefix scaling on this axis. </span>
<span class="sd">        </span>
<span class="sd">        When enabled, this feature automatically determines the best SI prefix </span>
<span class="sd">        to prepend to the label units, while ensuring that axis values are scaled</span>
<span class="sd">        accordingly. </span>
<span class="sd">        </span>
<span class="sd">        For example, if the axis spans values from -0.1 to 0.1 and has units set </span>
<span class="sd">        to &#39;V&#39; then the axis would display values -100 to 100</span>
<span class="sd">        and the units would appear as &#39;mV&#39;</span>
<span class="sd">        </span>
<span class="sd">        This feature is enabled by default, and is only available when a suffix</span>
<span class="sd">        (unit string) is provided to display on the label.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSIPrefix</span> <span class="o">=</span> <span class="n">enable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateAutoSIPrefix</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.updateAutoSIPrefix"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.updateAutoSIPrefix">[docs]</a>    <span class="k">def</span> <span class="nf">updateAutoSIPrefix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">isVisible</span><span class="p">():</span>
            <span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">siScale</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">labelUnits</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">]:</span>  <span class="c1">## If we are not showing units, wait until 1e6 before scaling.</span>
                <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">unitPrefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSIPrefixScale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
        
        
<div class="viewcode-block" id="AxisItem.setRange"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setRange">[docs]</a>    <span class="k">def</span> <span class="nf">setRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mn</span><span class="p">,</span> <span class="n">mx</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the range of values displayed by the axis.</span>
<span class="sd">        Usually this is handled automatically by linking the axis to a ViewBox with :func:`linkToView &lt;pyqtgraph.AxisItem.linkToView&gt;`&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isinf</span><span class="p">((</span><span class="n">mn</span><span class="p">,</span> <span class="n">mx</span><span class="p">)))</span> <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">((</span><span class="n">mn</span><span class="p">,</span> <span class="n">mx</span><span class="p">))):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not setting range to [</span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">mn</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">mx</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="p">[</span><span class="n">mn</span><span class="p">,</span> <span class="n">mx</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSIPrefix</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateAutoSIPrefix</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.linkedView"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.linkedView">[docs]</a>    <span class="k">def</span> <span class="nf">linkedView</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the ViewBox this axis is linked to&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linkedView</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linkedView</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.linkToView"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.linkToView">[docs]</a>    <span class="k">def</span> <span class="nf">linkToView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Link this axis to a ViewBox, causing its displayed range to match the visible range of the view.&quot;&quot;&quot;</span>
        <span class="n">oldView</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_linkedView</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">ref</span><span class="p">(</span><span class="n">view</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">oldView</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">oldView</span><span class="o">.</span><span class="n">sigYRangeChanged</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linkedViewChanged</span><span class="p">)</span>
            <span class="n">view</span><span class="o">.</span><span class="n">sigYRangeChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linkedViewChanged</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">oldView</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">oldView</span><span class="o">.</span><span class="n">sigXRangeChanged</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linkedViewChanged</span><span class="p">)</span>
            <span class="n">view</span><span class="o">.</span><span class="n">sigXRangeChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linkedViewChanged</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">oldView</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">oldView</span><span class="o">.</span><span class="n">sigResized</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linkedViewChanged</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">sigResized</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linkedViewChanged</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="AxisItem.linkedViewChanged"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.linkedViewChanged">[docs]</a>    <span class="k">def</span> <span class="nf">linkedViewChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">newRange</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">newRange</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">newRange</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">view</span><span class="o">.</span><span class="n">yInverted</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="o">*</span><span class="n">newRange</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="o">*</span><span class="n">newRange</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">newRange</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">newRange</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">viewRange</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">view</span><span class="o">.</span><span class="n">xInverted</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="o">*</span><span class="n">newRange</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setRange</span><span class="p">(</span><span class="o">*</span><span class="n">newRange</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="AxisItem.boundingRect"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.boundingRect">[docs]</a>    <span class="k">def</span> <span class="nf">boundingRect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">linkedView</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">linkedView</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapRectFromParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">())</span>
            <span class="c1">## extend rect if ticks go in negative direction</span>
            <span class="c1">## also extend to account for text that flows past the edges</span>
            <span class="n">tl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickLength&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span>
                <span class="n">rect</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">adjusted</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">tl</span><span class="p">),</span> <span class="mi">15</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
                <span class="n">rect</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">adjusted</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">tl</span><span class="p">),</span> <span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span><span class="p">:</span>
                <span class="n">rect</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">adjusted</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">tl</span><span class="p">))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;bottom&#39;</span><span class="p">:</span>
                <span class="n">rect</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">adjusted</span><span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">tl</span><span class="p">),</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">rect</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapRectFromParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">())</span> <span class="o">|</span> <span class="n">linkedView</span><span class="o">.</span><span class="n">mapRectToItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linkedView</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">())</span></div>
        
<div class="viewcode-block" id="AxisItem.paint"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.paint">[docs]</a>    <span class="k">def</span> <span class="nf">paint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">opt</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="n">profiler</span> <span class="o">=</span> <span class="n">debug</span><span class="o">.</span><span class="n">Profiler</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">picture</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPicture</span><span class="p">()</span>
                <span class="n">painter</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPainter</span><span class="p">(</span><span class="n">picture</span><span class="p">)</span>
                <span class="n">specs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generateDrawSpecs</span><span class="p">(</span><span class="n">painter</span><span class="p">)</span>
                <span class="n">profiler</span><span class="p">(</span><span class="s1">&#39;generate specs&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">specs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">drawPicture</span><span class="p">(</span><span class="n">painter</span><span class="p">,</span> <span class="o">*</span><span class="n">specs</span><span class="p">)</span>
                    <span class="n">profiler</span><span class="p">(</span><span class="s1">&#39;draw picture&#39;</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="n">painter</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="n">picture</span>
        <span class="c1">#p.setRenderHint(p.Antialiasing, False)   ## Sometimes we get a segfault here ???</span>
        <span class="c1">#p.setRenderHint(p.TextAntialiasing, True)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></div>

<div class="viewcode-block" id="AxisItem.setTicks"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setTicks">[docs]</a>    <span class="k">def</span> <span class="nf">setTicks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ticks</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Explicitly determine which ticks to display.</span>
<span class="sd">        This overrides the behavior specified by tickSpacing(), tickValues(), and tickStrings()</span>
<span class="sd">        The format for *ticks* looks like::</span>

<span class="sd">            [</span>
<span class="sd">                [ (majorTickValue1, majorTickString1), (majorTickValue2, majorTickString2), ... ],</span>
<span class="sd">                [ (minorTickValue1, minorTickString1), (minorTickValue2, minorTickString2), ... ],</span>
<span class="sd">                ...</span>
<span class="sd">            ]</span>
<span class="sd">        </span>
<span class="sd">        If *ticks* is None, then the default tick system will be used instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tickLevels</span> <span class="o">=</span> <span class="n">ticks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="AxisItem.setTickSpacing"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.setTickSpacing">[docs]</a>    <span class="k">def</span> <span class="nf">setTickSpacing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">major</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">levels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Explicitly determine the spacing of major and minor ticks. This </span>
<span class="sd">        overrides the default behavior of the tickSpacing method, and disables</span>
<span class="sd">        the effect of setTicks(). Arguments may be either *major* and *minor*, </span>
<span class="sd">        or *levels* which is a list of (spacing, offset) tuples for each </span>
<span class="sd">        tick level desired.</span>
<span class="sd">        </span>
<span class="sd">        If no arguments are given, then the default behavior of tickSpacing</span>
<span class="sd">        is enabled.</span>
<span class="sd">        </span>
<span class="sd">        Examples::</span>
<span class="sd">        </span>
<span class="sd">            # two levels, all offsets = 0</span>
<span class="sd">            axis.setTickSpacing(5, 1)</span>
<span class="sd">            # three levels, all offsets = 0</span>
<span class="sd">            axis.setTickSpacing([(3, 0), (1, 0), (0.25, 0)])</span>
<span class="sd">            # reset to default</span>
<span class="sd">            axis.setTickSpacing()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">levels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">major</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">levels</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">levels</span> <span class="o">=</span> <span class="p">[(</span><span class="n">major</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">minor</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tickSpacing</span> <span class="o">=</span> <span class="n">levels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">picture</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>
        

<div class="viewcode-block" id="AxisItem.tickSpacing"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.tickSpacing">[docs]</a>    <span class="k">def</span> <span class="nf">tickSpacing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minVal</span><span class="p">,</span> <span class="n">maxVal</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return values describing the desired spacing and offset of ticks.</span>
<span class="sd">        </span>
<span class="sd">        This method is called whenever the axis needs to be redrawn and is a </span>
<span class="sd">        good method to override in subclasses that require control over tick locations.</span>
<span class="sd">        </span>
<span class="sd">        The return value must be a list of tuples, one for each set of ticks::</span>
<span class="sd">        </span>
<span class="sd">            [</span>
<span class="sd">                (major tick spacing, offset),</span>
<span class="sd">                (minor tick spacing, offset),</span>
<span class="sd">                (sub-minor tick spacing, offset),</span>
<span class="sd">                ...</span>
<span class="sd">            ]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># First check for override tick spacing</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tickSpacing</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tickSpacing</span>
        
        <span class="n">dif</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxVal</span> <span class="o">-</span> <span class="n">minVal</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dif</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        
        <span class="c1">## decide optimal minor tick spacing in pixels (this is just aesthetics)</span>
        <span class="n">optimalTickCount</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">2.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">size</span><span class="p">))</span>
        
        <span class="c1">## optimal minor tick spacing </span>
        <span class="n">optimalSpacing</span> <span class="o">=</span> <span class="n">dif</span> <span class="o">/</span> <span class="n">optimalTickCount</span>
        
        <span class="c1">## the largest power-of-10 spacing which is smaller than optimal</span>
        <span class="n">p10unit</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">optimalSpacing</span><span class="p">))</span>
        
        <span class="c1">## Determine major/minor tick spacings which flank the optimal spacing.</span>
        <span class="n">intervals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">10.</span><span class="p">,</span> <span class="mf">20.</span><span class="p">,</span> <span class="mf">100.</span><span class="p">])</span> <span class="o">*</span> <span class="n">p10unit</span>
        <span class="n">minorIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">intervals</span><span class="p">[</span><span class="n">minorIndex</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">optimalSpacing</span><span class="p">:</span>
            <span class="n">minorIndex</span> <span class="o">+=</span> <span class="mi">1</span>
            
        <span class="n">levels</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">intervals</span><span class="p">[</span><span class="n">minorIndex</span><span class="o">+</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="n">intervals</span><span class="p">[</span><span class="n">minorIndex</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">),</span>
            <span class="c1">#(intervals[minorIndex], 0)    ## Pretty, but eats up CPU</span>
        <span class="p">]</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;maxTickLevel&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c1">## decide whether to include the last level of ticks</span>
            <span class="n">minSpacing</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mf">20.</span><span class="p">,</span> <span class="mf">30.</span><span class="p">)</span>
            <span class="n">maxTickCount</span> <span class="o">=</span> <span class="n">size</span> <span class="o">/</span> <span class="n">minSpacing</span>
            <span class="k">if</span> <span class="n">dif</span> <span class="o">/</span> <span class="n">intervals</span><span class="p">[</span><span class="n">minorIndex</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">maxTickCount</span><span class="p">:</span>
                <span class="n">levels</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">intervals</span><span class="p">[</span><span class="n">minorIndex</span><span class="p">],</span> <span class="mi">0</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">levels</span></div>
        
        
        
        <span class="c1">##### This does not work -- switching between 2/5 confuses the automatic text-level-selection</span>
        <span class="c1">### Determine major/minor tick spacings which flank the optimal spacing.</span>
        <span class="c1">#intervals = np.array([1., 2., 5., 10., 20., 50., 100.]) * p10unit</span>
        <span class="c1">#minorIndex = 0</span>
        <span class="c1">#while intervals[minorIndex+1] &lt;= optimalSpacing:</span>
            <span class="c1">#minorIndex += 1</span>
            
        <span class="c1">### make sure we never see 5 and 2 at the same time</span>
        <span class="c1">#intIndexes = [</span>
            <span class="c1">#[0,1,3],</span>
            <span class="c1">#[0,2,3],</span>
            <span class="c1">#[2,3,4],</span>
            <span class="c1">#[3,4,6],</span>
            <span class="c1">#[3,5,6],</span>
        <span class="c1">#][minorIndex]</span>
        
        <span class="c1">#return [</span>
            <span class="c1">#(intervals[intIndexes[2]], 0),</span>
            <span class="c1">#(intervals[intIndexes[1]], 0),</span>
            <span class="c1">#(intervals[intIndexes[0]], 0)</span>
        <span class="c1">#]</span>
        
<div class="viewcode-block" id="AxisItem.tickValues"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.tickValues">[docs]</a>    <span class="k">def</span> <span class="nf">tickValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minVal</span><span class="p">,</span> <span class="n">maxVal</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the values and spacing of ticks to draw::</span>
<span class="sd">        </span>
<span class="sd">            [  </span>
<span class="sd">                (spacing, [major ticks]), </span>
<span class="sd">                (spacing, [minor ticks]), </span>
<span class="sd">                ... </span>
<span class="sd">            ]</span>
<span class="sd">        </span>
<span class="sd">        By default, this method calls tickSpacing to determine the correct tick locations.</span>
<span class="sd">        This is a good method to override in subclasses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">minVal</span><span class="p">,</span> <span class="n">maxVal</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">((</span><span class="n">minVal</span><span class="p">,</span> <span class="n">maxVal</span><span class="p">))</span>
        

        <span class="n">minVal</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span>  
        <span class="n">maxVal</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span>
        <span class="c1">#size *= self.scale</span>
            
        <span class="n">ticks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tickLevels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tickSpacing</span><span class="p">(</span><span class="n">minVal</span><span class="p">,</span> <span class="n">maxVal</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
        <span class="n">allValues</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tickLevels</span><span class="p">)):</span>
            <span class="n">spacing</span><span class="p">,</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">tickLevels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            
            <span class="c1">## determine starting tick</span>
            <span class="n">start</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">((</span><span class="n">minVal</span><span class="o">-</span><span class="n">offset</span><span class="p">)</span> <span class="o">/</span> <span class="n">spacing</span><span class="p">)</span> <span class="o">*</span> <span class="n">spacing</span><span class="p">)</span> <span class="o">+</span> <span class="n">offset</span>
            
            <span class="c1">## determine number of ticks</span>
            <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">maxVal</span><span class="o">-</span><span class="n">start</span><span class="p">)</span> <span class="o">/</span> <span class="n">spacing</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">*</span> <span class="n">spacing</span> <span class="o">+</span> <span class="n">start</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span>
            <span class="c1">## remove any ticks that were present in higher levels</span>
            <span class="c1">## we assume here that if the difference between a tick value and a previously seen tick value</span>
            <span class="c1">## is less than spacing/100, then they are &#39;equal&#39; and we can ignore the new tick.</span>
            <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">allValues</span><span class="o">-</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">spacing</span><span class="o">*</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">values</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">allValues</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">allValues</span><span class="p">,</span> <span class="n">values</span><span class="p">])</span>
            <span class="n">ticks</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">spacing</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
            
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logMode</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">logTickValues</span><span class="p">(</span><span class="n">minVal</span><span class="p">,</span> <span class="n">maxVal</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">ticks</span><span class="p">)</span>
        
        
        <span class="c1">#nticks = []</span>
        <span class="c1">#for t in ticks:</span>
            <span class="c1">#nvals = []</span>
            <span class="c1">#for v in t[1]:</span>
                <span class="c1">#nvals.append(v/self.scale)</span>
            <span class="c1">#nticks.append((t[0]/self.scale,nvals))</span>
        <span class="c1">#ticks = nticks</span>
            
        <span class="k">return</span> <span class="n">ticks</span></div>
    
<div class="viewcode-block" id="AxisItem.logTickValues"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.logTickValues">[docs]</a>    <span class="k">def</span> <span class="nf">logTickValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minVal</span><span class="p">,</span> <span class="n">maxVal</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">stdTicks</span><span class="p">):</span>
        
        <span class="c1">## start with the tick spacing given by tickValues().</span>
        <span class="c1">## Any level whose spacing is &lt; 1 needs to be converted to log scale</span>
        
        <span class="n">ticks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">spacing</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span> <span class="ow">in</span> <span class="n">stdTicks</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">spacing</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
                <span class="n">ticks</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">spacing</span><span class="p">,</span> <span class="n">t</span><span class="p">))</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ticks</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">v1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">minVal</span><span class="p">))</span>
            <span class="n">v2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">maxVal</span><span class="p">))</span>
            <span class="c1">#major = list(range(v1+1, v2))</span>
            
            <span class="n">minor</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">):</span>
                <span class="n">minor</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span>
            <span class="n">minor</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">minor</span> <span class="k">if</span> <span class="n">x</span><span class="o">&gt;</span><span class="n">minVal</span> <span class="ow">and</span> <span class="n">x</span><span class="o">&lt;</span><span class="n">maxVal</span><span class="p">]</span>
            <span class="n">ticks</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">minor</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ticks</span></div>

<div class="viewcode-block" id="AxisItem.tickStrings"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.tickStrings">[docs]</a>    <span class="k">def</span> <span class="nf">tickStrings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">spacing</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the strings that should be placed next to ticks. This method is called </span>
<span class="sd">        when redrawing the axis and is a good method to override in subclasses.</span>
<span class="sd">        The method is called with a list of tick values, a scaling factor (see below), and the </span>
<span class="sd">        spacing between ticks (this is required since, in some instances, there may be only </span>
<span class="sd">        one tick and thus no other way to determine the tick spacing)</span>
<span class="sd">        </span>
<span class="sd">        The scale argument is used when the axis label is displaying units which may have an SI scaling prefix.</span>
<span class="sd">        When determining the text to display, use value*scale to correctly account for this prefix.</span>
<span class="sd">        For example, if the axis label&#39;s units are set to &#39;V&#39;, then a tick value of 0.001 might</span>
<span class="sd">        be accompanied by a scale value of 1000. This indicates that the label is displaying &#39;mV&#39;, and </span>
<span class="sd">        thus the tick should display 0.001 * 1000 = 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logMode</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">logTickStrings</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">spacing</span><span class="p">)</span>
        
        <span class="n">places</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">spacing</span><span class="o">*</span><span class="n">scale</span><span class="p">)))</span>
        <span class="n">strings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
            <span class="n">vs</span> <span class="o">=</span> <span class="n">v</span> <span class="o">*</span> <span class="n">scale</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">vs</span><span class="p">)</span> <span class="o">&lt;</span> <span class="o">.</span><span class="mi">001</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">vs</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">10000</span><span class="p">:</span>
                <span class="n">vstr</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%g</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">vs</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vstr</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%%</span><span class="s2">0.</span><span class="si">%d</span><span class="s2">f&quot;</span> <span class="o">%</span> <span class="n">places</span><span class="p">)</span> <span class="o">%</span> <span class="n">vs</span>
            <span class="n">strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vstr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">strings</span></div>
        
<div class="viewcode-block" id="AxisItem.logTickStrings"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.logTickStrings">[docs]</a>    <span class="k">def</span> <span class="nf">logTickStrings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">spacing</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%0.1g</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)]</span></div>
        
<div class="viewcode-block" id="AxisItem.generateDrawSpecs"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.generateDrawSpecs">[docs]</a>    <span class="k">def</span> <span class="nf">generateDrawSpecs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls tickValues() and tickStrings() to determine where and how ticks should</span>
<span class="sd">        be drawn, then generates from this a set of drawing commands to be </span>
<span class="sd">        interpreted by drawPicture().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">profiler</span> <span class="o">=</span> <span class="n">debug</span><span class="o">.</span><span class="n">Profiler</span><span class="p">()</span>

        <span class="c1">#bounds = self.boundingRect()</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapRectFromParent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">())</span>
        
        <span class="n">linkedView</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">linkedView</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">tickBounds</span> <span class="o">=</span> <span class="n">bounds</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tickBounds</span> <span class="o">=</span> <span class="n">linkedView</span><span class="o">.</span><span class="n">mapRectToItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linkedView</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">())</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span>
            <span class="n">span</span> <span class="o">=</span> <span class="p">(</span><span class="n">bounds</span><span class="o">.</span><span class="n">topRight</span><span class="p">(),</span> <span class="n">bounds</span><span class="o">.</span><span class="n">bottomRight</span><span class="p">())</span>
            <span class="n">tickStart</span> <span class="o">=</span> <span class="n">tickBounds</span><span class="o">.</span><span class="n">right</span><span class="p">()</span>
            <span class="n">tickStop</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">right</span><span class="p">()</span>
            <span class="n">tickDir</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
            <span class="n">span</span> <span class="o">=</span> <span class="p">(</span><span class="n">bounds</span><span class="o">.</span><span class="n">topLeft</span><span class="p">(),</span> <span class="n">bounds</span><span class="o">.</span><span class="n">bottomLeft</span><span class="p">())</span>
            <span class="n">tickStart</span> <span class="o">=</span> <span class="n">tickBounds</span><span class="o">.</span><span class="n">left</span><span class="p">()</span>
            <span class="n">tickStop</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">left</span><span class="p">()</span>
            <span class="n">tickDir</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span><span class="p">:</span>
            <span class="n">span</span> <span class="o">=</span> <span class="p">(</span><span class="n">bounds</span><span class="o">.</span><span class="n">bottomLeft</span><span class="p">(),</span> <span class="n">bounds</span><span class="o">.</span><span class="n">bottomRight</span><span class="p">())</span>
            <span class="n">tickStart</span> <span class="o">=</span> <span class="n">tickBounds</span><span class="o">.</span><span class="n">bottom</span><span class="p">()</span>
            <span class="n">tickStop</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">bottom</span><span class="p">()</span>
            <span class="n">tickDir</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;bottom&#39;</span><span class="p">:</span>
            <span class="n">span</span> <span class="o">=</span> <span class="p">(</span><span class="n">bounds</span><span class="o">.</span><span class="n">topLeft</span><span class="p">(),</span> <span class="n">bounds</span><span class="o">.</span><span class="n">topRight</span><span class="p">())</span>
            <span class="n">tickStart</span> <span class="o">=</span> <span class="n">tickBounds</span><span class="o">.</span><span class="n">top</span><span class="p">()</span>
            <span class="n">tickStop</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">top</span><span class="p">()</span>
            <span class="n">tickDir</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="c1">#print tickStart, tickStop, span</span>
        
        <span class="c1">## determine size of this item in pixels</span>
        <span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapToDevice</span><span class="p">,</span> <span class="n">span</span><span class="p">))</span>
        <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">lengthInPixels</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">lengthInPixels</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># Determine major / minor / subminor axis ticks</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tickLevels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tickLevels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tickValues</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">lengthInPixels</span><span class="p">)</span>
            <span class="n">tickStrings</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">## parse self.tickLevels into the formats returned by tickLevels() and tickStrings()</span>
            <span class="n">tickLevels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">tickStrings</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tickLevels</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">strings</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">tickLevels</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
                <span class="n">tickStrings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">strn</span> <span class="ow">in</span> <span class="n">level</span><span class="p">:</span>
                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                    <span class="n">strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">strn</span><span class="p">)</span>
        
        <span class="c1">## determine mapping between tick values and local coordinates</span>
        <span class="n">dif</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">dif</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">xScale</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">xScale</span> <span class="o">=</span> <span class="o">-</span><span class="n">bounds</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">/</span> <span class="n">dif</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">xScale</span> <span class="o">-</span> <span class="n">bounds</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">xScale</span> <span class="o">=</span> <span class="n">bounds</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">/</span> <span class="n">dif</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">xScale</span>
            
        <span class="n">xRange</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="n">xScale</span> <span class="o">-</span> <span class="n">offset</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">]</span>
        <span class="n">xMin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xRange</span><span class="p">)</span>
        <span class="n">xMax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">xRange</span><span class="p">)</span>
        
        <span class="n">profiler</span><span class="p">(</span><span class="s1">&#39;init&#39;</span><span class="p">)</span>
            
        <span class="n">tickPositions</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># remembers positions of previously drawn ticks</span>
        
        <span class="c1">## compute coordinates to draw ticks</span>
        <span class="c1">## draw three different intervals, long ticks first</span>
        <span class="n">tickSpecs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tickLevels</span><span class="p">)):</span>
            <span class="n">tickPositions</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
            <span class="n">ticks</span> <span class="o">=</span> <span class="n">tickLevels</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        
            <span class="c1">## length of tick</span>
            <span class="n">tickLength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickLength&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="p">((</span><span class="n">i</span><span class="o">*</span><span class="mf">0.5</span><span class="p">)</span><span class="o">+</span><span class="mf">1.0</span><span class="p">)</span>
                
            <span class="n">lineAlpha</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">/</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
                <span class="n">lineAlpha</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">/</span><span class="mf">255.</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">((</span><span class="mf">0.05</span>  <span class="o">*</span> <span class="n">lengthInPixels</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ticks</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">)</span>
            
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ticks</span><span class="p">:</span>
                <span class="c1">## determine actual position to draw this tick</span>
                <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span> <span class="o">*</span> <span class="n">xScale</span><span class="p">)</span> <span class="o">-</span> <span class="n">offset</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">xMin</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">xMax</span><span class="p">:</span>  <span class="c1">## last check to make sure no out-of-bounds ticks are drawn</span>
                    <span class="n">tickPositions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                    <span class="k">continue</span>
                <span class="n">tickPositions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                
                <span class="n">p1</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span>
                <span class="n">p2</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span>
                <span class="n">p1</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span> <span class="o">=</span> <span class="n">tickStart</span>
                <span class="n">p2</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span> <span class="o">=</span> <span class="n">tickStop</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                    <span class="n">p2</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span> <span class="o">+=</span> <span class="n">tickLength</span><span class="o">*</span><span class="n">tickDir</span>
                <span class="n">tickPen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="p">()</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">tickPen</span><span class="o">.</span><span class="n">color</span><span class="p">()</span>
                <span class="n">color</span><span class="o">.</span><span class="n">setAlpha</span><span class="p">(</span><span class="n">lineAlpha</span><span class="p">)</span>
                <span class="n">tickPen</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
                <span class="n">tickSpecs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">tickPen</span><span class="p">,</span> <span class="n">Point</span><span class="p">(</span><span class="n">p1</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="n">p2</span><span class="p">)))</span>
        <span class="n">profiler</span><span class="p">(</span><span class="s1">&#39;compute ticks&#39;</span><span class="p">)</span>

        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;stopAxisAtTick&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">span</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">(),</span> <span class="nb">min</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">min</span><span class="p">,</span> <span class="n">tickPositions</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">span</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">setY</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">span</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">setX</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;stopAxisAtTick&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">span</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">y</span><span class="p">(),</span> <span class="nb">max</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">max</span><span class="p">,</span> <span class="n">tickPositions</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">span</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setY</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">span</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setX</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
        <span class="n">axisSpec</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="p">(),</span> <span class="n">span</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">span</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        
        <span class="n">textOffset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickTextOffset&#39;</span><span class="p">][</span><span class="n">axis</span><span class="p">]</span>  <span class="c1">## spacing between axis and text</span>
        <span class="c1">#if self.style[&#39;autoExpandTextSpace&#39;] is True:</span>
            <span class="c1">#textWidth = self.textWidth</span>
            <span class="c1">#textHeight = self.textHeight</span>
        <span class="c1">#else:</span>
            <span class="c1">#textWidth = self.style[&#39;tickTextWidth&#39;] ## space allocated for horizontal text</span>
            <span class="c1">#textHeight = self.style[&#39;tickTextHeight&#39;] ## space allocated for horizontal text</span>
            
        <span class="n">textSize2</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">textRects</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">textSpecs</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1">## list of draw</span>
        
        <span class="c1"># If values are hidden, return early</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;showValues&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">axisSpec</span><span class="p">,</span> <span class="n">tickSpecs</span><span class="p">,</span> <span class="n">textSpecs</span><span class="p">)</span>
            
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tickLevels</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;maxTextLevel&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">)):</span>
            <span class="c1">## Get the list of strings to display for this level</span>
            <span class="k">if</span> <span class="n">tickStrings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">spacing</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="n">tickLevels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">strings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tickStrings</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoSIPrefixScale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="n">spacing</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">strings</span> <span class="o">=</span> <span class="n">tickStrings</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">strings</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>
            
            <span class="c1">## ignore strings belonging to ticks that were previously ignored</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">strings</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">tickPositions</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">strings</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="c1">## Measure density of text; decide whether to draw this level</span>
            <span class="n">rects</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">strings</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">s</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">rects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">br</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">,</span> <span class="n">asUnicode</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
                    <span class="c1">## boundingRect is usually just a bit too large</span>
                    <span class="c1">## (but this probably depends on per-font metrics?)</span>
                    <span class="n">br</span><span class="o">.</span><span class="n">setHeight</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.8</span><span class="p">)</span>
                    
                    <span class="n">rects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">br</span><span class="p">)</span>
                    <span class="n">textRects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rects</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">textRects</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1">## measure all text, make sure there&#39;s enough room</span>
                <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">textSize</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">textRects</span><span class="p">])</span>
                    <span class="n">textSize2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">textRects</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">textSize</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">textRects</span><span class="p">])</span>
                    <span class="n">textSize2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">textRects</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">textSize</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">textSize2</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1">## always draw top level</span>
                <span class="c1">## If the strings are too crowded, stop drawing text now.</span>
                <span class="c1">## We use three different crowding limits based on the number</span>
                <span class="c1">## of texts drawn so far.</span>
                <span class="n">textFillRatio</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">textSize</span><span class="p">)</span> <span class="o">/</span> <span class="n">lengthInPixels</span>
                <span class="n">finished</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">nTexts</span><span class="p">,</span> <span class="n">limit</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;textFillLimits&#39;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">textSpecs</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">nTexts</span> <span class="ow">and</span> <span class="n">textFillRatio</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
                        <span class="n">finished</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">finished</span><span class="p">:</span>
                    <span class="k">break</span>
            
            <span class="c1">#spacing, values = tickLevels[best]</span>
            <span class="c1">#strings = self.tickStrings(values, self.scale, spacing)</span>
            <span class="c1"># Determine exactly where tick text should be drawn</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">strings</span><span class="p">)):</span>
                <span class="n">vstr</span> <span class="o">=</span> <span class="n">strings</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">vstr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1">## this tick was ignored because it is out of bounds</span>
                    <span class="k">continue</span>
                <span class="n">vstr</span> <span class="o">=</span> <span class="n">asUnicode</span><span class="p">(</span><span class="n">vstr</span><span class="p">)</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">tickPositions</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
                <span class="c1">#textRect = p.boundingRect(QtCore.QRectF(0, 0, 100, 100), QtCore.Qt.AlignCenter, vstr)</span>
                <span class="n">textRect</span> <span class="o">=</span> <span class="n">rects</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">height</span> <span class="o">=</span> <span class="n">textRect</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
                <span class="n">width</span> <span class="o">=</span> <span class="n">textRect</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
                <span class="c1">#self.textHeight = height</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">style</span><span class="p">[</span><span class="s1">&#39;tickLength&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="n">textOffset</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span>
                    <span class="n">textFlags</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">TextDontClip</span><span class="o">|</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignRight</span><span class="o">|</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span>
                    <span class="n">rect</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span><span class="n">tickStop</span><span class="o">-</span><span class="n">offset</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="n">x</span><span class="o">-</span><span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;right&#39;</span><span class="p">:</span>
                    <span class="n">textFlags</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">TextDontClip</span><span class="o">|</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignLeft</span><span class="o">|</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignVCenter</span>
                    <span class="n">rect</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span><span class="n">tickStop</span><span class="o">+</span><span class="n">offset</span><span class="p">,</span> <span class="n">x</span><span class="o">-</span><span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;top&#39;</span><span class="p">:</span>
                    <span class="n">textFlags</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">TextDontClip</span><span class="o">|</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="o">|</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignBottom</span>
                    <span class="n">rect</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="n">tickStop</span><span class="o">-</span><span class="n">offset</span><span class="o">-</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s1">&#39;bottom&#39;</span><span class="p">:</span>
                    <span class="n">textFlags</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">TextDontClip</span><span class="o">|</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="o">|</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignTop</span>
                    <span class="n">rect</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mf">2.</span><span class="p">,</span> <span class="n">tickStop</span><span class="o">+</span><span class="n">offset</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>

                <span class="c1">#p.setPen(self.pen())</span>
                <span class="c1">#p.drawText(rect, textFlags, vstr)</span>
                <span class="n">textSpecs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">rect</span><span class="p">,</span> <span class="n">textFlags</span><span class="p">,</span> <span class="n">vstr</span><span class="p">))</span>
        <span class="n">profiler</span><span class="p">(</span><span class="s1">&#39;compute text&#39;</span><span class="p">)</span>
            
        <span class="c1">## update max text size if needed.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_updateMaxTextSize</span><span class="p">(</span><span class="n">textSize2</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="p">(</span><span class="n">axisSpec</span><span class="p">,</span> <span class="n">tickSpecs</span><span class="p">,</span> <span class="n">textSpecs</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="AxisItem.drawPicture"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.drawPicture">[docs]</a>    <span class="k">def</span> <span class="nf">drawPicture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">axisSpec</span><span class="p">,</span> <span class="n">tickSpecs</span><span class="p">,</span> <span class="n">textSpecs</span><span class="p">):</span>
        <span class="n">profiler</span> <span class="o">=</span> <span class="n">debug</span><span class="o">.</span><span class="n">Profiler</span><span class="p">()</span>

        <span class="n">p</span><span class="o">.</span><span class="n">setRenderHint</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Antialiasing</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">setRenderHint</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">TextAntialiasing</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        
        <span class="c1">## draw long line along axis</span>
        <span class="n">pen</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">axisSpec</span>
        <span class="n">p</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">pen</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>  <span class="c1">## resolves some damn pixel ambiguity</span>
        
        <span class="c1">## draw ticks</span>
        <span class="k">for</span> <span class="n">pen</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="ow">in</span> <span class="n">tickSpecs</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">pen</span><span class="p">)</span>
            <span class="n">p</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
        <span class="n">profiler</span><span class="p">(</span><span class="s1">&#39;draw ticks&#39;</span><span class="p">)</span>

        <span class="c1">## Draw all text</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tickFont</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tickFont</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pen</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">rect</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">textSpecs</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">drawText</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
            <span class="c1">#p.drawRect(rect)</span>
        <span class="n">profiler</span><span class="p">(</span><span class="s1">&#39;draw text&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="AxisItem.show"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">GraphicsWidget</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_updateWidth</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_updateHeight</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.hide"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.hide">[docs]</a>    <span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">GraphicsWidget</span><span class="o">.</span><span class="n">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_updateWidth</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_updateHeight</span><span class="p">()</span></div>

<div class="viewcode-block" id="AxisItem.wheelEvent"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.wheelEvent">[docs]</a>    <span class="k">def</span> <span class="nf">wheelEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> 
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span><span class="o">.</span><span class="n">wheelEvent</span><span class="p">(</span><span class="n">ev</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span><span class="o">.</span><span class="n">wheelEvent</span><span class="p">(</span><span class="n">ev</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ev</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="AxisItem.mouseDragEvent"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.mouseDragEvent">[docs]</a>    <span class="k">def</span> <span class="nf">mouseDragEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> 
            <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span><span class="o">.</span><span class="n">mouseDragEvent</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span><span class="o">.</span><span class="n">mouseDragEvent</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="AxisItem.mouseClickEvent"><a class="viewcode-back" href="../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.AxisItem.AxisItem.mouseClickEvent">[docs]</a>    <span class="k">def</span> <span class="nf">mouseClickEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> 
            <span class="k">return</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">linkedView</span><span class="p">()</span><span class="o">.</span><span class="n">mouseClickEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Richard A Kirian.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
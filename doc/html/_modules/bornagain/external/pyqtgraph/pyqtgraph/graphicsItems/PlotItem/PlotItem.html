

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem &mdash; bornagain 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../../../../search.html"/>
    <link rel="top" title="bornagain 0.0.1 documentation" href="../../../../../../../index.html"/>
        <link rel="up" title="bornagain.external.pyqtgraph.pyqtgraph" href="../../../pyqtgraph.html"/> 

  
  <script src="../../../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../../../index.html" class="icon icon-home"> bornagain
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../bornagain.html">bornagain package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../modules.html">bornagain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../coding.html">Coding guidlines for developers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">bornagain</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../../pyqtgraph.html">bornagain.external.pyqtgraph.pyqtgraph</a> &raquo;</li>
        
      <li>bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">PlotItem.py -  Graphics item implementing a scalable ViewBox with plotting powers.</span>
<span class="sd">Copyright 2010  Luke Campagnola</span>
<span class="sd">Distributed under MIT/X11 license. See license.txt for more infomation.</span>

<span class="sd">This class is one of the workhorses of pyqtgraph. It implements a graphics item with </span>
<span class="sd">plots, labels, and scales which can be viewed inside a QGraphicsScene. If you want</span>
<span class="sd">a widget that can be added to your GUI, see PlotWidget instead.</span>

<span class="sd">This class is very heavily featured:</span>
<span class="sd">  - Automatically creates and manages PlotCurveItems</span>
<span class="sd">  - Fast display and update of plots</span>
<span class="sd">  - Manages zoom/pan ViewBox, scale, and label elements</span>
<span class="sd">  - Automatic scaling when data changes</span>
<span class="sd">  - Control panel with a huge feature set including averaging, decimation,</span>
<span class="sd">    display, power spectrum, svg/png export, plot linking, and more.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">...Qt</span> <span class="k">import</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QT_LIB</span>
<span class="kn">from</span> <span class="nn">...</span> <span class="k">import</span> <span class="n">pixmaps</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="n">QT_LIB</span> <span class="o">==</span> <span class="s1">&#39;PyQt4&#39;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">.plotConfigTemplate_pyqt</span> <span class="k">import</span> <span class="o">*</span>
<span class="k">elif</span> <span class="n">QT_LIB</span> <span class="o">==</span> <span class="s1">&#39;PySide&#39;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">.plotConfigTemplate_pyside</span> <span class="k">import</span> <span class="o">*</span>
<span class="k">elif</span> <span class="n">QT_LIB</span> <span class="o">==</span> <span class="s1">&#39;PyQt5&#39;</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">.plotConfigTemplate_pyqt5</span> <span class="k">import</span> <span class="o">*</span>

<span class="kn">from</span> <span class="nn">...</span> <span class="k">import</span> <span class="n">functions</span> <span class="k">as</span> <span class="n">fn</span>
<span class="kn">from</span> <span class="nn">...widgets.FileDialog</span> <span class="k">import</span> <span class="n">FileDialog</span>
<span class="kn">import</span> <span class="nn">weakref</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="n">PlotDataItem</span> <span class="kn">import</span> <span class="nn">PlotDataItem</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="n">ViewBox</span> <span class="kn">import</span> <span class="nn">ViewBox</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="n">AxisItem</span> <span class="kn">import</span> <span class="nn">AxisItem</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="n">LabelItem</span> <span class="kn">import</span> <span class="nn">LabelItem</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="n">LegendItem</span> <span class="kn">import</span> <span class="nn">LegendItem</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="n">GraphicsWidget</span> <span class="kn">import</span> <span class="nn">GraphicsWidget</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="n">ButtonItem</span> <span class="kn">import</span> <span class="nn">ButtonItem</span>
<span class="kn">from</span> <span class="nn">..</span> <span class="n">InfiniteLine</span> <span class="kn">import</span> <span class="nn">InfiniteLine</span>
<span class="kn">from</span> <span class="nn">...WidgetGroup</span> <span class="k">import</span> <span class="n">WidgetGroup</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;PlotItem&#39;</span><span class="p">]</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">metaarray</span> <span class="k">import</span> <span class="o">*</span>
    <span class="n">HAVE_METAARRAY</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">HAVE_METAARRAY</span> <span class="o">=</span> <span class="kc">False</span>




<div class="viewcode-block" id="PlotItem"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem">[docs]</a><span class="k">class</span> <span class="nc">PlotItem</span><span class="p">(</span><span class="n">GraphicsWidget</span><span class="p">):</span>
    
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **Bases:** :class:`GraphicsWidget &lt;pyqtgraph.GraphicsWidget&gt;`</span>
<span class="sd">    </span>
<span class="sd">    Plot graphics item that can be added to any graphics scene. Implements axes, titles, and interactive viewbox. </span>
<span class="sd">    PlotItem also provides some basic analysis functionality that may be accessed from the context menu.</span>
<span class="sd">    Use :func:`plot() &lt;pyqtgraph.PlotItem.plot&gt;` to create a new PlotDataItem and add it to the view.</span>
<span class="sd">    Use :func:`addItem() &lt;pyqtgraph.PlotItem.addItem&gt;` to add any QGraphicsItem to the view.</span>
<span class="sd">    </span>
<span class="sd">    This class wraps several methods from its internal ViewBox:</span>
<span class="sd">    :func:`setXRange &lt;pyqtgraph.ViewBox.setXRange&gt;`,</span>
<span class="sd">    :func:`setYRange &lt;pyqtgraph.ViewBox.setYRange&gt;`,</span>
<span class="sd">    :func:`setRange &lt;pyqtgraph.ViewBox.setRange&gt;`,</span>
<span class="sd">    :func:`autoRange &lt;pyqtgraph.ViewBox.autoRange&gt;`,</span>
<span class="sd">    :func:`setXLink &lt;pyqtgraph.ViewBox.setXLink&gt;`,</span>
<span class="sd">    :func:`setYLink &lt;pyqtgraph.ViewBox.setYLink&gt;`,</span>
<span class="sd">    :func:`setAutoPan &lt;pyqtgraph.ViewBox.setAutoPan&gt;`,</span>
<span class="sd">    :func:`setAutoVisible &lt;pyqtgraph.ViewBox.setAutoVisible&gt;`,</span>
<span class="sd">    :func:`setLimits &lt;pyqtgraph.ViewBox.setLimits&gt;`,</span>
<span class="sd">    :func:`viewRect &lt;pyqtgraph.ViewBox.viewRect&gt;`,</span>
<span class="sd">    :func:`viewRange &lt;pyqtgraph.ViewBox.viewRange&gt;`,</span>
<span class="sd">    :func:`setMouseEnabled &lt;pyqtgraph.ViewBox.setMouseEnabled&gt;`,</span>
<span class="sd">    :func:`enableAutoRange &lt;pyqtgraph.ViewBox.enableAutoRange&gt;`,</span>
<span class="sd">    :func:`disableAutoRange &lt;pyqtgraph.ViewBox.disableAutoRange&gt;`,</span>
<span class="sd">    :func:`setAspectLocked &lt;pyqtgraph.ViewBox.setAspectLocked&gt;`,</span>
<span class="sd">    :func:`invertY &lt;pyqtgraph.ViewBox.invertY&gt;`,</span>
<span class="sd">    :func:`invertX &lt;pyqtgraph.ViewBox.invertX&gt;`,</span>
<span class="sd">    :func:`register &lt;pyqtgraph.ViewBox.register&gt;`,</span>
<span class="sd">    :func:`unregister &lt;pyqtgraph.ViewBox.unregister&gt;`</span>
<span class="sd">    </span>
<span class="sd">    The ViewBox itself can be accessed by calling :func:`getViewBox() &lt;pyqtgraph.PlotItem.getViewBox&gt;` </span>
<span class="sd">    </span>
<span class="sd">    ==================== =======================================================================</span>
<span class="sd">    **Signals:**</span>
<span class="sd">    sigYRangeChanged     wrapped from :class:`ViewBox &lt;pyqtgraph.ViewBox&gt;`</span>
<span class="sd">    sigXRangeChanged     wrapped from :class:`ViewBox &lt;pyqtgraph.ViewBox&gt;`</span>
<span class="sd">    sigRangeChanged      wrapped from :class:`ViewBox &lt;pyqtgraph.ViewBox&gt;`</span>
<span class="sd">    ==================== =======================================================================</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">sigRangeChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>    <span class="c1">## Emitted when the ViewBox range has changed</span>
    <span class="n">sigYRangeChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>   <span class="c1">## Emitted when the ViewBox Y range has changed</span>
    <span class="n">sigXRangeChanged</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>   <span class="c1">## Emitted when the ViewBox X range has changed</span>
    
    
    <span class="n">lastFileDir</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">viewBox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axisItems</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">enableMenu</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new PlotItem. All arguments are optional.</span>
<span class="sd">        Any extra keyword arguments are passed to PlotItem.plot().</span>
<span class="sd">        </span>
<span class="sd">        ==============  ==========================================================================================</span>
<span class="sd">        **Arguments:**</span>
<span class="sd">        *title*         Title to display at the top of the item. Html is allowed.</span>
<span class="sd">        *labels*        A dictionary specifying the axis labels to display::</span>
<span class="sd">                   </span>
<span class="sd">                            {&#39;left&#39;: (args), &#39;bottom&#39;: (args), ...}</span>
<span class="sd">                     </span>
<span class="sd">                        The name of each axis and the corresponding arguments are passed to </span>
<span class="sd">                        :func:`PlotItem.setLabel() &lt;pyqtgraph.PlotItem.setLabel&gt;`</span>
<span class="sd">                        Optionally, PlotItem my also be initialized with the keyword arguments left,</span>
<span class="sd">                        right, top, or bottom to achieve the same effect.</span>
<span class="sd">        *name*          Registers a name for this view so that others may link to it</span>
<span class="sd">        *viewBox*       If specified, the PlotItem will be constructed with this as its ViewBox.</span>
<span class="sd">        *axisItems*     Optional dictionary instructing the PlotItem to use pre-constructed items</span>
<span class="sd">                        for its axes. The dict keys must be axis names (&#39;left&#39;, &#39;bottom&#39;, &#39;right&#39;, &#39;top&#39;)</span>
<span class="sd">                        and the values must be instances of AxisItem (or at least compatible with AxisItem).</span>
<span class="sd">        ==============  ==========================================================================================</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">GraphicsWidget</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">setSizePolicy</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">)</span>
        
        <span class="c1">## Set up control buttons</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="c1">#self.autoImageFile = os.path.join(path, &#39;auto.png&#39;)</span>
        <span class="c1">#self.lockImageFile = os.path.join(path, &#39;lock.png&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span> <span class="o">=</span> <span class="n">ButtonItem</span><span class="p">(</span><span class="n">pixmaps</span><span class="o">.</span><span class="n">getPixmap</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">),</span> <span class="mi">14</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">autoBtnClicked</span><span class="p">)</span>
        <span class="c1">#self.autoBtn.hide()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttonsHidden</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1">## whether the user has requested buttons to be hidden</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseHovering</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QGraphicsGridLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setHorizontalSpacing</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setVerticalSpacing</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">viewBox</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">viewBox</span> <span class="o">=</span> <span class="n">ViewBox</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span> <span class="o">=</span> <span class="n">viewBox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">sigStateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">viewStateChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMenuEnabled</span><span class="p">(</span><span class="n">enableMenu</span><span class="p">,</span> <span class="n">enableMenu</span><span class="p">)</span> <span class="c1">## en/disable plotitem and viewbox menus</span>
        
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">sigRangeChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigRangeChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">sigXRangeChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigXRangeChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">sigYRangeChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigYRangeChanged</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoAlpha</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrumMode</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="c1">## Create and place axis items</span>
        <span class="k">if</span> <span class="n">axisItems</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">axisItems</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">pos</span> <span class="ow">in</span> <span class="p">((</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span> <span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))):</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">axisItems</span><span class="p">:</span>
                <span class="n">axis</span> <span class="o">=</span> <span class="n">axisItems</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">axis</span> <span class="o">=</span> <span class="n">AxisItem</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">linkToView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="n">axis</span><span class="p">,</span> <span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="n">pos</span><span class="p">}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="o">*</span><span class="n">pos</span><span class="p">)</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">setZValue</span><span class="p">(</span><span class="o">-</span><span class="mi">1000</span><span class="p">)</span>
            <span class="n">axis</span><span class="o">.</span><span class="n">setFlag</span><span class="p">(</span><span class="n">axis</span><span class="o">.</span><span class="n">ItemNegativeZStacksBehindParent</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span> <span class="o">=</span> <span class="n">LabelItem</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;11pt&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>  <span class="c1">## hide</span>
        
        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setRowPreferredHeight</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setRowMinimumHeight</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setRowSpacing</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setRowStretchFactor</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setColumnPreferredWidth</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setColumnMinimumWidth</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setColumnSpacing</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setColumnStretchFactor</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setRowStretchFactor</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setColumnStretchFactor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
        

        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">curves</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">itemMeta</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakKeyDictionary</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataItems</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">paramList</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="c1">### Set up context menu</span>
        
        <span class="n">w</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span> <span class="o">=</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Ui_Form</span><span class="p">()</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setupUi</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="n">dv</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDoubleValidator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        
        <span class="n">menuItems</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;Transforms&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">transformGroup</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;Downsample&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">decimateGroup</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">averageGroup</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;Alpha&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">alphaGroup</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;Grid&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">gridGroup</span><span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;Points&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">pointsGroup</span><span class="p">),</span>
        <span class="p">]</span>
        
        
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrlMenu</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QMenu</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrlMenu</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s1">&#39;Plot Options&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subMenus</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">grp</span> <span class="ow">in</span> <span class="n">menuItems</span><span class="p">:</span>
            <span class="n">sm</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QMenu</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">act</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidgetAction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">act</span><span class="o">.</span><span class="n">setDefaultWidget</span><span class="p">(</span><span class="n">grp</span><span class="p">)</span>
            <span class="n">sm</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">act</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subMenus</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sm</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrlMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="n">sm</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">stateGroup</span> <span class="o">=</span> <span class="n">WidgetGroup</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">menuItems</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stateGroup</span><span class="o">.</span><span class="n">autoAdd</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="n">c</span><span class="o">.</span><span class="n">alphaGroup</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateAlpha</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">alphaSlider</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateAlpha</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">autoAlphaCheck</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateAlpha</span><span class="p">)</span>

        <span class="n">c</span><span class="o">.</span><span class="n">xGridCheck</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateGrid</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">yGridCheck</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateGrid</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">gridAlphaSlider</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateGrid</span><span class="p">)</span>

        <span class="n">c</span><span class="o">.</span><span class="n">fftCheck</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateSpectrumMode</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">logXCheck</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateLogMode</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">logYCheck</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateLogMode</span><span class="p">)</span>

        <span class="n">c</span><span class="o">.</span><span class="n">downsampleSpin</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateDownsampling</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">downsampleCheck</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateDownsampling</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">autoDownsampleCheck</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateDownsampling</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">subsampleRadio</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateDownsampling</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">meanRadio</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateDownsampling</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">clipToViewCheck</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateDownsampling</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">avgParamList</span><span class="o">.</span><span class="n">itemClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">avgParamListClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">averageGroup</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">avgToggled</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">maxTracesCheck</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateDecimation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">maxTracesSpin</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updateDecimation</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">hideAxis</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hideAxis</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showAxis</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showAxis</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">kargs</span><span class="p">:</span>
                <span class="n">labels</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">kargs</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">kargs</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">labels</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="n">basestring</span><span class="p">):</span>
                <span class="n">labels</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">k</span><span class="p">],)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="o">*</span><span class="n">labels</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
                
        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kargs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
        
        
<div class="viewcode-block" id="PlotItem.implements"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.implements">[docs]</a>    <span class="k">def</span> <span class="nf">implements</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">interface</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;ViewBoxWrapper&#39;</span><span class="p">]</span></div>

<div class="viewcode-block" id="PlotItem.getViewBox"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.getViewBox">[docs]</a>    <span class="k">def</span> <span class="nf">getViewBox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the :class:`ViewBox &lt;pyqtgraph.ViewBox&gt;` contained within.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">vb</span></div>

    
    <span class="c1">## Wrap a few methods from viewBox. </span>
    <span class="c1">#Important: don&#39;t use a settattr(m, getattr(self.vb, m)) as we&#39;d be leaving the viebox alive</span>
    <span class="c1">#because we had a reference to an instance method (creating wrapper methods at runtime instead).</span>
    
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;setXRange&#39;</span><span class="p">,</span> <span class="s1">&#39;setYRange&#39;</span><span class="p">,</span> <span class="s1">&#39;setXLink&#39;</span><span class="p">,</span> <span class="s1">&#39;setYLink&#39;</span><span class="p">,</span> <span class="s1">&#39;setAutoPan&#39;</span><span class="p">,</span>         <span class="c1"># NOTE: </span>
              <span class="s1">&#39;setAutoVisible&#39;</span><span class="p">,</span> <span class="s1">&#39;setRange&#39;</span><span class="p">,</span> <span class="s1">&#39;autoRange&#39;</span><span class="p">,</span> <span class="s1">&#39;viewRect&#39;</span><span class="p">,</span> <span class="s1">&#39;viewRange&#39;</span><span class="p">,</span>     <span class="c1"># If you update this list, please </span>
              <span class="s1">&#39;setMouseEnabled&#39;</span><span class="p">,</span> <span class="s1">&#39;setLimits&#39;</span><span class="p">,</span> <span class="s1">&#39;enableAutoRange&#39;</span><span class="p">,</span> <span class="s1">&#39;disableAutoRange&#39;</span><span class="p">,</span>  <span class="c1"># update the class docstring </span>
              <span class="s1">&#39;setAspectLocked&#39;</span><span class="p">,</span> <span class="s1">&#39;invertY&#39;</span><span class="p">,</span> <span class="s1">&#39;invertX&#39;</span><span class="p">,</span> <span class="s1">&#39;register&#39;</span><span class="p">,</span> <span class="s1">&#39;unregister&#39;</span><span class="p">]:</span>                <span class="c1"># as well.</span>
                
        <span class="k">def</span> <span class="nf">_create_method</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
                <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="p">,</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">method</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">name</span>
            <span class="k">return</span> <span class="n">method</span>
        
        <span class="nb">locals</span><span class="p">()[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="n">_create_method</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        
    <span class="k">del</span> <span class="n">_create_method</span>
    
    
<div class="viewcode-block" id="PlotItem.setLogMode"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.setLogMode">[docs]</a>    <span class="k">def</span> <span class="nf">setLogMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set log scaling for x and/or y axes.</span>
<span class="sd">        This informs PlotDataItems to transform logarithmically and switches</span>
<span class="sd">        the axes to use log ticking. </span>
<span class="sd">        </span>
<span class="sd">        Note that *no other items* in the scene will be affected by</span>
<span class="sd">        this; there is (currently) no generic way to redisplay a GraphicsItem</span>
<span class="sd">        with log coordinates.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">logXCheck</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">logYCheck</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">y</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PlotItem.showGrid"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.showGrid">[docs]</a>    <span class="k">def</span> <span class="nf">showGrid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show or hide the grid for either axis.</span>
<span class="sd">        </span>
<span class="sd">        ==============  =====================================</span>
<span class="sd">        **Arguments:**</span>
<span class="sd">        x               (bool) Whether to show the X grid</span>
<span class="sd">        y               (bool) Whether to show the Y grid</span>
<span class="sd">        alpha           (0.0-1.0) Opacity of the grid</span>
<span class="sd">        ==============  =====================================</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">alpha</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Must specify at least one of x, y, or alpha.&quot;</span><span class="p">)</span>  <span class="c1">## prevent people getting confused if they just call showGrid()</span>
        
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">xGridCheck</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">yGridCheck</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">alpha</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">gridAlphaSlider</span><span class="o">.</span><span class="n">maximum</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">gridAlphaSlider</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">v</span><span class="p">)</span></div>
        
    <span class="c1">#def paint(self, *args):</span>
        <span class="c1">#prof = debug.Profiler()</span>
        <span class="c1">#QtGui.QGraphicsWidget.paint(self, *args)</span>
        
    <span class="c1">## bad idea. </span>
    <span class="c1">#def __getattr__(self, attr):  ## wrap ms</span>
        <span class="c1">#return getattr(self.vb, attr)</span>
        
<div class="viewcode-block" id="PlotItem.close"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#print &quot;delete&quot;, self</span>
        <span class="c1">## Most of this crap is needed to avoid PySide trouble. </span>
        <span class="c1">## The problem seems to be whenever scene.clear() leads to deletion of widgets (either through proxies or qgraphicswidgets)</span>
        <span class="c1">## the solution is to manually remove all widgets before scene.clear() is called</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrlMenu</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="c1">## already shut down</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrlMenu</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrlMenu</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="s1">&#39;item&#39;</span><span class="p">]</span>
            <span class="n">i</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">()</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span> <span class="o">=</span> <span class="kc">None</span></div>
        
<div class="viewcode-block" id="PlotItem.registerPlot"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.registerPlot">[docs]</a>    <span class="k">def</span> <span class="nf">registerPlot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>   <span class="c1">## for backward compatibility</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PlotItem.updateGrid"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.updateGrid">[docs]</a>    <span class="k">def</span> <span class="nf">updateGrid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">gridAlphaSlider</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">alpha</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">xGridCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">alpha</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">yGridCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setGrid</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setGrid</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setGrid</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setGrid</span><span class="p">(</span><span class="n">y</span><span class="p">)</span></div>

<div class="viewcode-block" id="PlotItem.viewGeometry"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.viewGeometry">[docs]</a>    <span class="k">def</span> <span class="nf">viewGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the screen geometry of the viewbox&quot;&quot;&quot;</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">()</span><span class="o">.</span><span class="n">views</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">mapRectToScene</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">())</span>
        <span class="n">wr</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">mapFromScene</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">()</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">mapToGlobal</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
        <span class="n">wr</span><span class="o">.</span><span class="n">adjust</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">wr</span></div>


<div class="viewcode-block" id="PlotItem.avgToggled"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.avgToggled">[docs]</a>    <span class="k">def</span> <span class="nf">avgToggled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recomputeAverages</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">b</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PlotItem.avgParamListClicked"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.avgParamListClicked">[docs]</a>    <span class="k">def</span> <span class="nf">avgParamListClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">paramList</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">checkState</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recomputeAverages</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="PlotItem.recomputeAverages"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.recomputeAverages">[docs]</a>    <span class="k">def</span> <span class="nf">recomputeAverages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">averageGroup</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addAvgCurve</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">replot</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="PlotItem.addAvgCurve"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.addAvgCurve">[docs]</a>    <span class="k">def</span> <span class="nf">addAvgCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">curve</span><span class="p">):</span>
        <span class="c1">## Add a single curve into the pool of curves averaged together</span>
        
        <span class="c1">## If there are plot parameters, then we need to determine which to average together.</span>
        <span class="n">remKeys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">addKeys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">avgParamList</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        
            <span class="c1">### First determine the key of the curve to which this new data should be averaged</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">avgParamList</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">avgParamList</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">checkState</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">:</span>
                    <span class="n">remKeys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">addKeys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()))</span>
                    
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">remKeys</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1">## In this case, there would be 1 average plot for each data plot; not useful.</span>
                <span class="k">return</span>
                
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">itemMeta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">curve</span><span class="p">,{})</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
                <span class="n">p</span><span class="p">[</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">k</span><span class="p">)]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">p</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">rk</span> <span class="ow">in</span> <span class="n">remKeys</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rk</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">p</span><span class="p">[</span><span class="n">rk</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">ak</span> <span class="ow">in</span> <span class="n">addKeys</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ak</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
                <span class="n">p</span><span class="p">[</span><span class="n">ak</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">key</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        
        <span class="c1">### Create a new curve if needed</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span><span class="p">:</span>
            <span class="n">plot</span> <span class="o">=</span> <span class="n">PlotDataItem</span><span class="p">()</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">mkPen</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">setShadowPen</span><span class="p">(</span><span class="n">fn</span><span class="o">.</span><span class="n">mkPen</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">setAlpha</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">setZValue</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">plot</span><span class="p">,</span> <span class="n">skipAverage</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">plot</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">plot</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        
        <span class="c1">### Average data together</span>
        <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">yData</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">plot</span><span class="o">.</span><span class="n">yData</span><span class="o">.</span><span class="n">shape</span><span class="p">:</span>
            <span class="c1"># note that if shapes do not match, then the average resets.</span>
            <span class="n">newData</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">yData</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">xData</span><span class="p">,</span> <span class="n">newData</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PlotItem.autoBtnClicked"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.autoBtnClicked">[docs]</a>    <span class="k">def</span> <span class="nf">autoBtnClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;auto&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">enableAutoRange</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">disableAutoRange</span><span class="p">()</span></div>
            
<div class="viewcode-block" id="PlotItem.viewStateChanged"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.viewStateChanged">[docs]</a>    <span class="k">def</span> <span class="nf">viewStateChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateButtons</span><span class="p">()</span></div>
            
<div class="viewcode-block" id="PlotItem.enableAutoScale"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.enableAutoScale">[docs]</a>    <span class="k">def</span> <span class="nf">enableAutoScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable auto-scaling. The plot will continuously scale to fit the boundaries of its data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: enableAutoScale is deprecated. Use enableAutoRange(axis, enable) instead.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">enableAutoRange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">XYAxes</span><span class="p">)</span></div>

<div class="viewcode-block" id="PlotItem.addItem"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.addItem">[docs]</a>    <span class="k">def</span> <span class="nf">addItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a graphics item to the view box. </span>
<span class="sd">        If the item has plot data (PlotDataItem, PlotCurveItem, ScatterPlotItem), it may</span>
<span class="sd">        be included in analysis performed by the PlotItem.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="n">vbargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="s1">&#39;ignoreBounds&#39;</span> <span class="ow">in</span> <span class="n">kargs</span><span class="p">:</span>
            <span class="n">vbargs</span><span class="p">[</span><span class="s1">&#39;ignoreBounds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;ignoreBounds&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">vbargs</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;implements&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">item</span><span class="o">.</span><span class="n">implements</span><span class="p">(</span><span class="s1">&#39;plotData&#39;</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataItems</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="c1">#self.plotChanged()</span>
            
            <span class="n">params</span> <span class="o">=</span> <span class="n">kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">itemMeta</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>
            <span class="c1">#item.setMeta(params)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="c1">#self.addItem(c)</span>
            
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;setLogMode&#39;</span><span class="p">):</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setLogMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">logXCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">logYCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">())</span>
            
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PlotDataItem</span><span class="p">):</span>
            <span class="c1">## configure curve for this plot</span>
            <span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">auto</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alphaState</span><span class="p">()</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setAlpha</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">auto</span><span class="p">)</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setFftMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">fftCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">())</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setDownsampling</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">downsampleMode</span><span class="p">())</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setClipToView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clipToViewMode</span><span class="p">())</span>
            <span class="n">item</span><span class="o">.</span><span class="n">setPointMode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pointMode</span><span class="p">())</span>
            
            <span class="c1">## Hide older plots if needed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateDecimation</span><span class="p">()</span>
            
            <span class="c1">## Add to average if needed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateParamList</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">averageGroup</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="ow">and</span> <span class="s1">&#39;skipAverage&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kargs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">addAvgCurve</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                
            <span class="c1">#c.connect(c, QtCore.SIGNAL(&#39;plotChanged&#39;), self.plotChanged)</span>
            <span class="c1">#item.sigPlotChanged.connect(self.plotChanged)</span>
            <span class="c1">#self.plotChanged()</span>
        <span class="c1">#name = kargs.get(&#39;name&#39;, getattr(item, &#39;opts&#39;, {}).get(&#39;name&#39;, None))</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;legend&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>
            

<div class="viewcode-block" id="PlotItem.addDataItem"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.addDataItem">[docs]</a>    <span class="k">def</span> <span class="nf">addDataItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PlotItem.addDataItem is deprecated. Use addItem instead.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PlotItem.listDataItems"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.listDataItems">[docs]</a>    <span class="k">def</span> <span class="nf">listDataItems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of all data items (PlotDataItem, PlotCurveItem, ScatterPlotItem, etc)</span>
<span class="sd">        contained in this PlotItem.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataItems</span><span class="p">[:]</span></div>
        
<div class="viewcode-block" id="PlotItem.addCurve"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.addCurve">[docs]</a>    <span class="k">def</span> <span class="nf">addCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;PlotItem.addCurve is deprecated. Use addItem instead.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span></div>

<div class="viewcode-block" id="PlotItem.addLine"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.addLine">[docs]</a>    <span class="k">def</span> <span class="nf">addLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an InfiniteLine and add to the plot. </span>
<span class="sd">        </span>
<span class="sd">        If *x* is specified,</span>
<span class="sd">        the line will be vertical. If *y* is specified, the line will be</span>
<span class="sd">        horizontal. All extra keyword arguments are passed to</span>
<span class="sd">        :func:`InfiniteLine.__init__() &lt;pyqtgraph.InfiniteLine.__init__&gt;`.</span>
<span class="sd">        Returns the item created.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pos&#39;</span><span class="p">,</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;angle&#39;</span><span class="p">,</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="mi">90</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">InfiniteLine</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">z</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">setZValue</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">line</span></div>
        
        

<div class="viewcode-block" id="PlotItem.removeItem"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.removeItem">[docs]</a>    <span class="k">def</span> <span class="nf">removeItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove an item from the internal ViewBox.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataItems</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dataItems</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">scene</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateDecimation</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updateParamList</span><span class="p">()</span></div>
            <span class="c1">#item.connect(item, QtCore.SIGNAL(&#39;plotChanged&#39;), self.plotChanged)</span>
            <span class="c1">#item.sigPlotChanged.connect(self.plotChanged)</span>

<div class="viewcode-block" id="PlotItem.clear"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove all items from the ViewBox.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">[:]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span> <span class="o">=</span> <span class="p">{}</span></div>
    
<div class="viewcode-block" id="PlotItem.clearPlots"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.clearPlots">[docs]</a>    <span class="k">def</span> <span class="nf">clearPlots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">[:]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avgCurves</span> <span class="o">=</span> <span class="p">{}</span></div>
        
    
<div class="viewcode-block" id="PlotItem.plot"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add and return a new plot.</span>
<span class="sd">        See :func:`PlotDataItem.__init__ &lt;pyqtgraph.PlotDataItem.__init__&gt;` for data arguments</span>
<span class="sd">        </span>
<span class="sd">        Extra allowed arguments are:</span>
<span class="sd">            clear    - clear all plots before displaying new data</span>
<span class="sd">            params   - meta-parameters to associate with this data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        
        <span class="n">clear</span> <span class="o">=</span> <span class="n">kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
          
        <span class="k">if</span> <span class="n">clear</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            
        <span class="n">item</span> <span class="o">=</span> <span class="n">PlotDataItem</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">item</span></div>

<div class="viewcode-block" id="PlotItem.addLegend"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.addLegend">[docs]</a>    <span class="k">def</span> <span class="nf">addLegend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">)):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new LegendItem and anchor it over the internal ViewBox.</span>
<span class="sd">        Plots will be automatically displayed in the legend if they</span>
<span class="sd">        are created with the &#39;name&#39; argument.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend</span> <span class="o">=</span> <span class="n">LegendItem</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">setParentItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">legend</span></div>
        
<div class="viewcode-block" id="PlotItem.scatterPlot"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.scatterPlot">[docs]</a>    <span class="k">def</span> <span class="nf">scatterPlot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;pen&#39;</span> <span class="ow">in</span> <span class="n">kargs</span><span class="p">:</span>
            <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;symbolPen&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;pen&#39;</span><span class="p">]</span>
        <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;pen&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            
        <span class="k">if</span> <span class="s1">&#39;brush&#39;</span> <span class="ow">in</span> <span class="n">kargs</span><span class="p">:</span>
            <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;symbolBrush&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;brush&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;brush&#39;</span><span class="p">]</span>
            
        <span class="k">if</span> <span class="s1">&#39;size&#39;</span> <span class="ow">in</span> <span class="n">kargs</span><span class="p">:</span>
            <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;symbolSize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kargs</span><span class="p">[</span><span class="s1">&#39;size&#39;</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>
                
<div class="viewcode-block" id="PlotItem.replot"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.replot">[docs]</a>    <span class="k">def</span> <span class="nf">replot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="PlotItem.updateParamList"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.updateParamList">[docs]</a>    <span class="k">def</span> <span class="nf">updateParamList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">avgParamList</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="c1">## Check to see that each parameter for each curve is present in the list</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">itemMeta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                    
                <span class="c1">## If the parameter is not in the list, add it.</span>
                <span class="n">matches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">avgParamList</span><span class="o">.</span><span class="n">findItems</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">MatchExactly</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">paramList</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">paramList</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                        <span class="n">i</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">i</span><span class="o">.</span><span class="n">setCheckState</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Unchecked</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">avgParamList</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    
                <span class="bp">self</span><span class="o">.</span><span class="n">paramList</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">checkState</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">Checked</span><span class="p">)</span></div>


    <span class="c1">## Qt&#39;s SVG-writing capabilities are pretty terrible. </span>
<div class="viewcode-block" id="PlotItem.writeSvgCurves"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.writeSvgCurves">[docs]</a>    <span class="k">def</span> <span class="nf">writeSvgCurves</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fileName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">PlotItem</span><span class="o">.</span><span class="n">lastFileDir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">setDirectory</span><span class="p">(</span><span class="n">PlotItem</span><span class="o">.</span><span class="n">lastFileDir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">setFileMode</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">AnyFile</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">setAcceptMode</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">AcceptSave</span><span class="p">)</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">fileSelected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">writeSvg</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="c1">#if fileName is None:</span>
            <span class="c1">#fileName = QtGui.QFileDialog.getSaveFileName()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not implemented yet..&quot;</span><span class="p">)</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="n">PlotItem</span><span class="o">.</span><span class="n">lastFileDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        
        <span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">viewRect</span><span class="p">()</span>
        <span class="n">xRange</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">left</span><span class="p">(),</span> <span class="n">rect</span><span class="o">.</span><span class="n">right</span><span class="p">()</span> 
        
        <span class="n">svg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">fh</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">dx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">right</span><span class="p">(),</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">left</span><span class="p">(),</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ymn</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">top</span><span class="p">(),</span> <span class="n">rect</span><span class="o">.</span><span class="n">bottom</span><span class="p">())</span>
        <span class="n">ymx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">top</span><span class="p">(),</span> <span class="n">rect</span><span class="o">.</span><span class="n">bottom</span><span class="p">())</span>
        <span class="n">dy</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymx</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymn</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">sx</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="n">sy</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="k">while</span> <span class="n">dx</span><span class="o">*</span><span class="n">sx</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">sx</span> <span class="o">*=</span> <span class="mi">1000</span>
        <span class="k">while</span> <span class="n">dy</span><span class="o">*</span><span class="n">sy</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">sy</span> <span class="o">*=</span> <span class="mi">1000</span>
        <span class="n">sy</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="c1">#fh.write(&#39;&lt;svg viewBox=&quot;%f %f %f %f&quot;&gt;\n&#39; % (rect.left()*sx, rect.top()*sx, rect.width()*sy, rect.height()*sy))</span>
        <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;svg&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-opacity=&quot;0.5&quot; stroke-width=&quot;1&quot; d=&quot;M</span><span class="si">%f</span><span class="s1">,0 L</span><span class="si">%f</span><span class="s1">,0&quot;/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">left</span><span class="p">()</span><span class="o">*</span><span class="n">sx</span><span class="p">,</span> <span class="n">rect</span><span class="o">.</span><span class="n">right</span><span class="p">()</span><span class="o">*</span><span class="n">sx</span><span class="p">))</span>
        <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-opacity=&quot;0.5&quot; stroke-width=&quot;1&quot; d=&quot;M0,</span><span class="si">%f</span><span class="s1"> L0,</span><span class="si">%f</span><span class="s1">&quot;/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">top</span><span class="p">()</span><span class="o">*</span><span class="n">sy</span><span class="p">,</span> <span class="n">rect</span><span class="o">.</span><span class="n">bottom</span><span class="p">()</span><span class="o">*</span><span class="n">sy</span><span class="p">))</span>


        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">PlotCurveItem</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">colorStr</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">color</span><span class="p">())</span>
                <span class="n">opacity</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">pen</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">alpha</span><span class="p">()</span> <span class="o">/</span> <span class="mf">255.</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span>
                <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">xRange</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">xRange</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">mask</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">mask</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="n">m2</span> <span class="o">=</span> <span class="n">mask</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">mask</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+=</span> <span class="n">m2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
                
                <span class="n">x</span> <span class="o">*=</span> <span class="n">sx</span>
                <span class="n">y</span> <span class="o">*=</span> <span class="n">sy</span>
                
                <span class="c1">#fh.write(&#39;&lt;g fill=&quot;none&quot; stroke=&quot;#%s&quot; stroke-opacity=&quot;1&quot; stroke-width=&quot;1&quot;&gt;\n&#39; % color)</span>
                <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;path fill=&quot;none&quot; stroke=&quot;#</span><span class="si">%s</span><span class="s1">&quot; stroke-opacity=&quot;</span><span class="si">%f</span><span class="s1">&quot; stroke-width=&quot;1&quot; d=&quot;M</span><span class="si">%f</span><span class="s1">,</span><span class="si">%f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
                    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;L</span><span class="si">%f</span><span class="s1">,</span><span class="si">%f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
                
                <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&quot;/&gt;&#39;</span><span class="p">)</span>
                <span class="c1">#fh.write(&quot;&lt;/g&gt;&quot;)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataItems</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">ScatterPlotItem</span><span class="p">):</span>
                
                <span class="n">pRect</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">()</span>
                <span class="n">vRect</span> <span class="o">=</span> <span class="n">pRect</span><span class="o">.</span><span class="n">intersected</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
                
                <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">points</span><span class="p">():</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">rect</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">colorStr</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">brush</span><span class="o">.</span><span class="n">color</span><span class="p">())</span>
                    <span class="n">opacity</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">brush</span><span class="o">.</span><span class="n">color</span><span class="p">()</span><span class="o">.</span><span class="n">alpha</span><span class="p">()</span> <span class="o">/</span> <span class="mf">255.</span>
                    <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">()</span> <span class="o">*</span> <span class="n">sx</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">()</span> <span class="o">*</span> <span class="n">sy</span>
                    
                    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;circle cx=&quot;</span><span class="si">%f</span><span class="s1">&quot; cy=&quot;</span><span class="si">%f</span><span class="s1">&quot; r=&quot;1&quot; fill=&quot;#</span><span class="si">%s</span><span class="s1">&quot; stroke=&quot;none&quot; fill-opacity=&quot;</span><span class="si">%f</span><span class="s1">&quot;/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">opacity</span><span class="p">))</span>
                    <span class="c1">#fh.write(&#39;&lt;path fill=&quot;none&quot; stroke=&quot;#%s&quot; stroke-opacity=&quot;%f&quot; stroke-width=&quot;1&quot; d=&quot;M%f,%f &#39; % (color, opacity, x[0], y[0]))</span>
                    <span class="c1">#for i in xrange(1, len(x)):</span>
                        <span class="c1">#fh.write(&#39;L%f,%f &#39; % (x[i], y[i]))</span>
                    
                    <span class="c1">#fh.write(&#39;&quot;/&gt;&#39;)</span>
            
        <span class="c1">## get list of curves, scatter plots</span>
        
        
        <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;/svg&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>
        
        
    
<div class="viewcode-block" id="PlotItem.writeSvg"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.writeSvg">[docs]</a>    <span class="k">def</span> <span class="nf">writeSvg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fileName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">()</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="n">PlotItem</span><span class="o">.</span><span class="n">lastFileDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        
        <span class="kn">from</span> <span class="nn">...exporters</span> <span class="k">import</span> <span class="n">SVGExporter</span>
        <span class="n">ex</span> <span class="o">=</span> <span class="n">SVGExporter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">ex</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PlotItem.writeImage"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.writeImage">[docs]</a>    <span class="k">def</span> <span class="nf">writeImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fileName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">PlotItem</span><span class="o">.</span><span class="n">lastFileDir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">setDirectory</span><span class="p">(</span><span class="n">PlotItem</span><span class="o">.</span><span class="n">lastFileDir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">setFileMode</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">AnyFile</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">setAcceptMode</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">AcceptSave</span><span class="p">)</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">fileSelected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">writeImage</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="c1">#if fileName is None:</span>
            <span class="c1">#fileName = QtGui.QFileDialog.getSaveFileName()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Not implemented yet..&quot;</span><span class="p">)</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="n">PlotItem</span><span class="o">.</span><span class="n">lastFileDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">png</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QImage</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()),</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()),</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QImage</span><span class="o">.</span><span class="n">Format_ARGB32</span><span class="p">)</span>
        <span class="n">painter</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPainter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">png</span><span class="p">)</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">setRenderHints</span><span class="p">(</span><span class="n">painter</span><span class="o">.</span><span class="n">Antialiasing</span> <span class="o">|</span> <span class="n">painter</span><span class="o">.</span><span class="n">TextAntialiasing</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">painter</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QRectF</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapRectToScene</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">()))</span>
        <span class="n">painter</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">png</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PlotItem.writeCsv"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.writeCsv">[docs]</a>    <span class="k">def</span> <span class="nf">writeCsv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">fileName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">PlotItem</span><span class="o">.</span><span class="n">lastFileDir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">setDirectory</span><span class="p">(</span><span class="n">PlotItem</span><span class="o">.</span><span class="n">lastFileDir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">setFileMode</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">AnyFile</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">setAcceptMode</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">AcceptSave</span><span class="p">)</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileDialog</span><span class="o">.</span><span class="n">fileSelected</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">writeCsv</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="c1">#if fileName is None:</span>
            <span class="c1">#fileName = QtGui.QFileDialog.getSaveFileName()</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        <span class="n">PlotItem</span><span class="o">.</span><span class="n">lastFileDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
        
        <span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">getData</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%g</span><span class="s1">,</span><span class="si">%g</span><span class="s1">,&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]))</span>
                    <span class="n">done</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; , ,&#39;</span><span class="p">)</span>
            <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">fd</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="PlotItem.saveState"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.saveState">[docs]</a>    <span class="k">def</span> <span class="nf">saveState</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stateGroup</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
        <span class="n">state</span><span class="p">[</span><span class="s1">&#39;paramList&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">paramList</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">state</span><span class="p">[</span><span class="s1">&#39;view&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">getState</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">state</span></div>
        
<div class="viewcode-block" id="PlotItem.restoreState"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.restoreState">[docs]</a>    <span class="k">def</span> <span class="nf">restoreState</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;paramList&#39;</span> <span class="ow">in</span> <span class="n">state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">paramList</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;paramList&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">stateGroup</span><span class="o">.</span><span class="n">setState</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateSpectrumMode</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateDownsampling</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateAlpha</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateDecimation</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="s1">&#39;powerSpectrumGroup&#39;</span> <span class="ow">in</span> <span class="n">state</span><span class="p">:</span>
            <span class="n">state</span><span class="p">[</span><span class="s1">&#39;fftCheck&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;powerSpectrumGroup&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;gridGroup&#39;</span> <span class="ow">in</span> <span class="n">state</span><span class="p">:</span>
            <span class="n">state</span><span class="p">[</span><span class="s1">&#39;xGridCheck&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;gridGroup&#39;</span><span class="p">]</span>
            <span class="n">state</span><span class="p">[</span><span class="s1">&#39;yGridCheck&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;gridGroup&#39;</span><span class="p">]</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">stateGroup</span><span class="o">.</span><span class="n">setState</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateParamList</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="s1">&#39;view&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">state</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">float</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;xMinText&#39;</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;xMaxText&#39;</span><span class="p">])],</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;yMinText&#39;</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;yMaxText&#39;</span><span class="p">])]]</span>
            <span class="n">state</span><span class="p">[</span><span class="s1">&#39;view&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;autoRange&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;xAutoRadio&#39;</span><span class="p">],</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;yAutoRadio&#39;</span><span class="p">]],</span>
                <span class="s1">&#39;linkedViews&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;xLinkCombo&#39;</span><span class="p">],</span> <span class="n">state</span><span class="p">[</span><span class="s1">&#39;yLinkCombo&#39;</span><span class="p">]],</span>
                <span class="s1">&#39;targetRange&#39;</span><span class="p">:</span> <span class="n">r</span><span class="p">,</span>
                <span class="s1">&#39;viewRange&#39;</span><span class="p">:</span> <span class="n">r</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">setState</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;view&#39;</span><span class="p">])</span></div>
        

<div class="viewcode-block" id="PlotItem.widgetGroupInterface"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.widgetGroupInterface">[docs]</a>    <span class="k">def</span> <span class="nf">widgetGroupInterface</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">PlotItem</span><span class="o">.</span><span class="n">saveState</span><span class="p">,</span> <span class="n">PlotItem</span><span class="o">.</span><span class="n">restoreState</span><span class="p">)</span></div>
      
<div class="viewcode-block" id="PlotItem.updateSpectrumMode"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.updateSpectrumMode">[docs]</a>    <span class="k">def</span> <span class="nf">updateSpectrumMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">fftCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">setFftMode</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enableAutoRange</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recomputeAverages</span><span class="p">()</span></div>
            
<div class="viewcode-block" id="PlotItem.updateLogMode"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.updateLogMode">[docs]</a>    <span class="k">def</span> <span class="nf">updateLogMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">logXCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">logYCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;setLogMode&#39;</span><span class="p">):</span>
                <span class="n">i</span><span class="o">.</span><span class="n">setLogMode</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLogMode</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLogMode</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLogMode</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLogMode</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enableAutoRange</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recomputeAverages</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="PlotItem.setDownsampling"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.setDownsampling">[docs]</a>    <span class="k">def</span> <span class="nf">setDownsampling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change the default downsampling mode for all PlotDataItems managed by this plot.</span>
<span class="sd">        </span>
<span class="sd">        =============== =================================================================</span>
<span class="sd">        **Arguments:**</span>
<span class="sd">        ds              (int) Reduce visible plot samples by this factor, or</span>
<span class="sd">                        (bool) To enable/disable downsampling without changing the value.</span>
<span class="sd">        auto            (bool) If True, automatically pick *ds* based on visible range</span>
<span class="sd">        mode            &#39;subsample&#39;: Downsample by taking the first of N samples.</span>
<span class="sd">                        This method is fastest and least accurate.</span>
<span class="sd">                        &#39;mean&#39;: Downsample by taking the mean of N samples.</span>
<span class="sd">                        &#39;peak&#39;: Downsample by drawing a saw wave that follows the min</span>
<span class="sd">                        and max of the original data. This method produces the best</span>
<span class="sd">                        visual representation of the data but is slower.</span>
<span class="sd">        =============== =================================================================</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">ds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ds</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">downsampleCheck</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ds</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">downsampleCheck</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">downsampleCheck</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">downsampleSpin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
                
        <span class="k">if</span> <span class="n">auto</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">auto</span> <span class="ow">and</span> <span class="n">ds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">downsampleCheck</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">autoDownsampleCheck</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">auto</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;subsample&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">subsampleRadio</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;mean&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">meanRadio</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;peak&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">peakRadio</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;mode argument must be &#39;subsample&#39;, &#39;mean&#39;, or &#39;peak&#39;.&quot;</span><span class="p">)</span></div>
            
<div class="viewcode-block" id="PlotItem.updateDownsampling"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.updateDownsampling">[docs]</a>    <span class="k">def</span> <span class="nf">updateDownsampling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ds</span><span class="p">,</span> <span class="n">auto</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downsampleMode</span><span class="p">()</span>
        <span class="n">clip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">clipToViewCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">setDownsampling</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">auto</span><span class="p">,</span> <span class="n">method</span><span class="p">)</span>
            <span class="n">c</span><span class="o">.</span><span class="n">setClipToView</span><span class="p">(</span><span class="n">clip</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recomputeAverages</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="PlotItem.downsampleMode"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.downsampleMode">[docs]</a>    <span class="k">def</span> <span class="nf">downsampleMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">downsampleCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">downsampleSpin</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="mi">1</span>
            
        <span class="n">auto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">downsampleCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">autoDownsampleCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
            
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">subsampleRadio</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;subsample&#39;</span> 
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">meanRadio</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;mean&#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">peakRadio</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;peak&#39;</span>
        
        <span class="k">return</span> <span class="n">ds</span><span class="p">,</span> <span class="n">auto</span><span class="p">,</span> <span class="n">method</span></div>
        
<div class="viewcode-block" id="PlotItem.setClipToView"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.setClipToView">[docs]</a>    <span class="k">def</span> <span class="nf">setClipToView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clip</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the default clip-to-view mode for all PlotDataItems managed by this plot.</span>
<span class="sd">        If *clip* is True, then PlotDataItems will attempt to draw only points within the visible</span>
<span class="sd">        range of the ViewBox.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">clipToViewCheck</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">clip</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PlotItem.clipToViewMode"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.clipToViewMode">[docs]</a>    <span class="k">def</span> <span class="nf">clipToViewMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">clipToViewCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span></div>
        
        
        
<div class="viewcode-block" id="PlotItem.updateDecimation"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.updateDecimation">[docs]</a>    <span class="k">def</span> <span class="nf">updateDecimation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">maxTracesCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="n">numCurves</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">maxTracesSpin</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">numCurves</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            
        <span class="n">curves</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">[:]</span>
        <span class="n">split</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">curves</span><span class="p">)</span> <span class="o">-</span> <span class="n">numCurves</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">curves</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">numCurves</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">split</span><span class="p">:</span>
                <span class="n">curves</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">forgetTracesCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                    <span class="n">curves</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">curves</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">curves</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span></div>
        
      
<div class="viewcode-block" id="PlotItem.updateAlpha"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.updateAlpha">[docs]</a>    <span class="k">def</span> <span class="nf">updateAlpha</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">auto</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alphaState</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">curves</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">setAlpha</span><span class="p">(</span><span class="n">alpha</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">auto</span><span class="p">)</span></div>
     
<div class="viewcode-block" id="PlotItem.alphaState"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.alphaState">[docs]</a>    <span class="k">def</span> <span class="nf">alphaState</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">alphaGroup</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="n">auto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">autoAlphaCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">alphaSlider</span><span class="o">.</span><span class="n">value</span><span class="p">())</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">alphaSlider</span><span class="o">.</span><span class="n">maximum</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">auto</span><span class="p">:</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1">## should be 1/number of overlapping plots</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">enabled</span><span class="p">:</span>
            <span class="n">auto</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">auto</span><span class="p">)</span></div>

<div class="viewcode-block" id="PlotItem.pointMode"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.pointMode">[docs]</a>    <span class="k">def</span> <span class="nf">pointMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">pointsGroup</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrl</span><span class="o">.</span><span class="n">autoPointsCheck</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">mode</span></div>
        

<div class="viewcode-block" id="PlotItem.resizeEvent"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.resizeEvent">[docs]</a>    <span class="k">def</span> <span class="nf">resizeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1">## already closed down</span>
            <span class="k">return</span>
        <span class="n">btnRect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapRectFromItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span><span class="o">.</span><span class="n">boundingRect</span><span class="p">())</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">-</span> <span class="n">btnRect</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="PlotItem.getMenu"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.getMenu">[docs]</a>    <span class="k">def</span> <span class="nf">getMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrlMenu</span></div>
    
<div class="viewcode-block" id="PlotItem.getContextMenus"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.getContextMenus">[docs]</a>    <span class="k">def</span> <span class="nf">getContextMenus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="c1">## called when another item is displaying its context menu; we get to add extras to the end of the menu.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">menuEnabled</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctrlMenu</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="PlotItem.setMenuEnabled"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.setMenuEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">setMenuEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enableMenu</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">enableViewBoxMenu</span><span class="o">=</span><span class="s1">&#39;same&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable or disable the context menu for this PlotItem.</span>
<span class="sd">        By default, the ViewBox&#39;s context menu will also be affected.</span>
<span class="sd">        (use enableViewBoxMenu=None to leave the ViewBox unchanged)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_menuEnabled</span> <span class="o">=</span> <span class="n">enableMenu</span>
        <span class="k">if</span> <span class="n">enableViewBoxMenu</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">enableViewBoxMenu</span> <span class="ow">is</span> <span class="s1">&#39;same&#39;</span><span class="p">:</span>
            <span class="n">enableViewBoxMenu</span> <span class="o">=</span> <span class="n">enableMenu</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">setMenuEnabled</span><span class="p">(</span><span class="n">enableViewBoxMenu</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="PlotItem.menuEnabled"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.menuEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">menuEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_menuEnabled</span></div>
    
<div class="viewcode-block" id="PlotItem.hoverEvent"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.hoverEvent">[docs]</a>    <span class="k">def</span> <span class="nf">hoverEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ev</span><span class="o">.</span><span class="n">enter</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseHovering</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">ev</span><span class="o">.</span><span class="n">exit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseHovering</span> <span class="o">=</span> <span class="kc">False</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">updateButtons</span><span class="p">()</span></div>
    

<div class="viewcode-block" id="PlotItem.getLabel"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.getLabel">[docs]</a>    <span class="k">def</span> <span class="nf">getLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">pass</span></div>
        
    <span class="k">def</span> <span class="nf">_checkScaleKey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Scale &#39;</span><span class="si">%s</span><span class="s2">&#39; not found. Scales are: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">keys</span><span class="p">()))))</span>
        
<div class="viewcode-block" id="PlotItem.getScale"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.getScale">[docs]</a>    <span class="k">def</span> <span class="nf">getScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PlotItem.getAxis"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.getAxis">[docs]</a>    <span class="k">def</span> <span class="nf">getAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the specified AxisItem. </span>
<span class="sd">        *name* should be &#39;left&#39;, &#39;bottom&#39;, &#39;top&#39;, or &#39;right&#39;.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checkScaleKey</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s1">&#39;item&#39;</span><span class="p">]</span></div>
        
<div class="viewcode-block" id="PlotItem.setLabel"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.setLabel">[docs]</a>    <span class="k">def</span> <span class="nf">setLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unitPrefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the label for an axis. Basic HTML formatting is allowed.</span>
<span class="sd">        </span>
<span class="sd">        ==============  =================================================================</span>
<span class="sd">        **Arguments:**</span>
<span class="sd">        axis            must be one of &#39;left&#39;, &#39;bottom&#39;, &#39;right&#39;, or &#39;top&#39;</span>
<span class="sd">        text            text to display along the axis. HTML allowed.</span>
<span class="sd">        units           units to display after the title. If units are given,</span>
<span class="sd">                        then an SI prefix will be automatically appended</span>
<span class="sd">                        and the axis values will be scaled accordingly.</span>
<span class="sd">                        (ie, use &#39;V&#39; instead of &#39;mV&#39;; &#39;m&#39; will be added automatically)</span>
<span class="sd">        ==============  =================================================================</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">units</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showAxis</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="PlotItem.setLabels"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.setLabels">[docs]</a>    <span class="k">def</span> <span class="nf">setLabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convenience function allowing multiple labels and/or title to be set in one call.</span>
<span class="sd">        Keyword arguments can be &#39;title&#39;, &#39;left&#39;, &#39;bottom&#39;, &#39;right&#39;, or &#39;top&#39;.</span>
<span class="sd">        Values may be strings or a tuple of arguments to pass to setLabel.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">kwds</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">basestring</span><span class="p">):</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="n">v</span><span class="p">,)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="o">*</span><span class="n">v</span><span class="p">)</span></div>
        
        
<div class="viewcode-block" id="PlotItem.showLabel"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.showLabel">[docs]</a>    <span class="k">def</span> <span class="nf">showLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show or hide one of the plot&#39;s axis labels (the axis itself will be unaffected).</span>
<span class="sd">        axis must be one of &#39;left&#39;, &#39;bottom&#39;, &#39;right&#39;, or &#39;top&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getScale</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span><span class="o">.</span><span class="n">showLabel</span><span class="p">(</span><span class="n">show</span><span class="p">)</span></div>

<div class="viewcode-block" id="PlotItem.setTitle"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.setTitle">[docs]</a>    <span class="k">def</span> <span class="nf">setTitle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the title of the plot. Basic HTML formatting is allowed.</span>
<span class="sd">        If title is None, then the title will be hidden.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setRowFixedHeight</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span><span class="o">.</span><span class="n">setMaximumHeight</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span><span class="o">.</span><span class="n">setMaximumHeight</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">setRowFixedHeight</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">)</span></div>

<div class="viewcode-block" id="PlotItem.showAxis"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.showAxis">[docs]</a>    <span class="k">def</span> <span class="nf">showAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show or hide one of the plot&#39;s axes.</span>
<span class="sd">        axis must be one of &#39;left&#39;, &#39;bottom&#39;, &#39;right&#39;, or &#39;top&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getScale</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="n">axis</span><span class="p">][</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span></div>
            
<div class="viewcode-block" id="PlotItem.hideAxis"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.hideAxis">[docs]</a>    <span class="k">def</span> <span class="nf">hideAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Hide one of the PlotItem&#39;s axes. (&#39;left&#39;, &#39;bottom&#39;, &#39;right&#39;, or &#39;top&#39;)&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showAxis</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span></div>
            
<div class="viewcode-block" id="PlotItem.showScale"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.showScale">[docs]</a>    <span class="k">def</span> <span class="nf">showScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Deprecated. use showAxis() instead&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">showAxis</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span></div>
            
<div class="viewcode-block" id="PlotItem.hideButtons"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.hideButtons">[docs]</a>    <span class="k">def</span> <span class="nf">hideButtons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Causes auto-scale button (&#39;A&#39; in lower-left corner) to be hidden for this PlotItem&quot;&quot;&quot;</span>
        <span class="c1">#self.ctrlBtn.hide()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttonsHidden</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateButtons</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="PlotItem.showButtons"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.showButtons">[docs]</a>    <span class="k">def</span> <span class="nf">showButtons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Causes auto-scale button (&#39;A&#39; in lower-left corner) to be visible for this PlotItem&quot;&quot;&quot;</span>
        <span class="c1">#self.ctrlBtn.hide()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttonsHidden</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateButtons</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="PlotItem.updateButtons"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.updateButtons">[docs]</a>    <span class="k">def</span> <span class="nf">updateButtons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exportOpts</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseHovering</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonsHidden</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vb</span><span class="o">.</span><span class="n">autoRangeEnabled</span><span class="p">()):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">autoBtn</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="k">pass</span>  <span class="c1"># this can happen if the plot has been deleted.</span></div>
            
    <span class="k">def</span> <span class="nf">_plotArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Array must be 1D to plot (shape is </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;X array must be 1D to plot (shape is </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">PlotCurveItem</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">c</span>
            
        
        
    <span class="k">def</span> <span class="nf">_plotMetaArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">autoLabel</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
        <span class="n">inf</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">infoCopy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">arr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;can only automatically plot 1 dimensional arrays.&#39;</span><span class="p">)</span>
        <span class="c1">## create curve</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">xv</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">xvals</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">xv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">xv</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">PlotCurveItem</span><span class="p">(</span><span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">setData</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">xv</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">arr</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">))</span>
        
        <span class="k">if</span> <span class="n">autoLabel</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">units</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">units</span><span class="p">)</span>
            
            <span class="n">name</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">_info</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">units</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">_info</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setLabel</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="n">units</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">c</span>

      
<div class="viewcode-block" id="PlotItem.setExportMode"><a class="viewcode-back" href="../../../../../../../bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.html#bornagain.external.pyqtgraph.pyqtgraph.graphicsItems.PlotItem.PlotItem.PlotItem.setExportMode">[docs]</a>    <span class="k">def</span> <span class="nf">setExportMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">export</span><span class="p">,</span> <span class="n">opts</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">GraphicsWidget</span><span class="o">.</span><span class="n">setExportMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">export</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updateButtons</span><span class="p">()</span></div></div>
        <span class="c1">#if export:</span>
            <span class="c1">#self.autoBtn.hide()</span>
        <span class="c1">#else:</span>
            <span class="c1">#self.autoBtn.show()</span>
    
</pre></div>

           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Richard A Kirian.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../../../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>